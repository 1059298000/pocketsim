(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{196:function(e,t,n){"use strict";(function(e){var a=n(3),i=n(334),r=n(16),o=n(15),s=n(32),c=n(31),l=n(33),u=n(0),d=n.n(u),h=n(46),m=n(83),p=n.n(m),f=n(11),g=n.n(f),v=n(14),b=n.n(v),M=n(84),S=n.n(M),O=n(85),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return Math.min(Math.max(e,t),n)};function E(e,t,n,a){return e.addEventListener(t,n,a),{remove:function(){e.removeEventListener(t,n,a)}}}function y(e,t,n){return(n-t)*e/100+t}function j(t,n,a,i){var r=t.getBoundingClientRect(),o=r.width,s=r.height,c=function(t){var n=e,a=n.scrollY,i=n.scrollX,r=t.getBoundingClientRect(),o=r.left;return{top:r.top+a,left:o+i}}(t),l=c.top,u=c.left,d=function(e){return e.changedTouches&&e.changedTouches[0]?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}(n),h=d.x,m=d.y,p=a?m-l:h-u,f=(a?s:o)/100;return i?100-w(p/f):w(p/f)}function x(e){e.preventDefault()}var T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={currentState:"initial"},n.handleKeyDown=function(e){var t,a=n.props,i=a.min,r=a.max,o=a.value,s=Math.abs((r-i)/100),c=n.props.step||s;switch(p()(e)){case"home":t=i;break;case"end":t=r;break;case"page up":t=o+10*s;break;case"page down":t=o-10*s;break;case"right":case"up":t=o+c;break;case"left":case"down":t=o-c;break;default:return}e.preventDefault(),t=w(t,i,r),n.emitChange(e,t)},n.handleFocus=function(){n.setState({currentState:"focused"})},n.handleBlur=function(){n.setState({currentState:"normal"})},n.handleClick=function(e){var t=n.props,a=t.min,i=t.max,r=t.vertical,o=t.reverse,s=y(j(n.container,e,r,o),a,i);n.emitChange(e,s,function(){n.playJumpAnimation()})},n.handleTouchStart=function(e){n.setState({currentState:"activated"}),n.globalMouseUpListener=E(document,"touchend",n.handleMouseUp),"function"===typeof n.props.onDragStart&&n.props.onDragStart(e)},n.handleMouseDown=function(e){n.setState({currentState:"activated"}),n.globalMouseUpListener=E(document,"mouseup",n.handleMouseUp),n.globalMouseMoveListener=E(document,"mousemove",n.handleMouseMove),"function"===typeof n.props.onDragEnd&&n.props.onDragEnd(e)},n.handleMouseUp=function(e){n.setState({currentState:"normal"}),n.globalMouseUpListener&&n.globalMouseUpListener.remove(),n.globalMouseMoveListener&&n.globalMouseMoveListener.remove(),"function"===typeof n.props.onDragEnd&&n.props.onDragEnd(e)},n.handleMouseMove=function(e){var t=n.props,a=t.min,i=t.max,r=t.vertical,o=t.reverse,s=y(j(n.container,e,r,o),a,i);n.emitChange(e,s)},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.container&&this.container.addEventListener("touchstart",x,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.container.removeEventListener("touchstart",x,{passive:!1})}},{key:"emitChange",value:function(e,t,n){var a=this.props,i=a.step,r=a.trackValue,o=a.value,s=a.onChange,c=t;c=i?function(e,t){return Math.round(e/t)*t}(t,i):Number(t.toFixed(3)),"function"===typeof s&&c!==o&&(s(e,Math.min(c,r)),"function"===typeof n&&n())}},{key:"calculateTrackAfterStyles",value:function(e){switch(this.state.currentState){case"activated":return"calc(100% - ".concat(0===e?7:5,"px)");case"disabled":return"calc(".concat(100-e,"% - 6px)");default:return"calc(100% - 5px)"}}},{key:"calculateTrackBeforeStyles",value:function(e){switch(this.state.currentState){case"disabled":return"calc(".concat(e,"% - 6px)");default:return"".concat(e,"%")}}},{key:"playJumpAnimation",value:function(){var e=this;this.setState({currentState:"jumped"},function(){setTimeout(function(){e.setState({currentState:"normal"})},e.props.theme.transitions.duration.complex)})}},{key:"render",value:function(){var e,t,n=this,r=this.state.currentState,o=this.props,s=o.component,c=o.classes,l=o.value,u=o.trackValue,m=o.min,p=o.max,f=o.vertical,v=o.reverse,b=o.disabled,M=Object(i.a)(o,["component","classes","value","trackValue","min","max","vertical","reverse","disabled"]),O=w(100*(l-m)/(p-m)),E=w(100*(u-m)/(p-m)),y=(e={},Object(a.a)(e,c.disabled,b),Object(a.a)(e,c.jumped,!b&&"jumped"===r),Object(a.a)(e,c.focused,!b&&"focused"===r),Object(a.a)(e,c.activated,!b&&"activated"===r),e),j=g()(c.container,(t={},Object(a.a)(t,c.vertical,f),Object(a.a)(t,c.reverse,v),Object(a.a)(t,c.disabled,b),t)),x=g()(c.track,c.trackBefore,y,Object(a.a)({},c.vertical,f)),T=g()(c.track,c.trackAfter,y,Object(a.a)({},c.vertical,f)),C=g()(c.thumb,y,Object(a.a)({},c.zero,0===O)),L=f?"height":"width",G=f?"top":"left",k=Object(a.a)({},L,this.calculateTrackBeforeStyles(E)),A=Object(a.a)({},L,this.calculateTrackAfterStyles(E)),P=Object(a.a)({},G,"".concat(O,"%"));return d.a.createElement(s,Object.assign({role:"slider",className:j,"aria-valuenow":l,"aria-valuemin":m,"aria-valuemax":p,"aria-orientation":f?"vertical":"horizontal",onClick:this.handleClick,ref:function(e){n.container=Object(h.findDOMNode)(e)}},M),d.a.createElement("div",{className:x,style:k}),d.a.createElement(S.a,{className:C,disableRipple:!0,style:P,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchStartCapture:this.handleTouchStart,onTouchMove:this.handleMouseMove,onFocusVisible:this.handleFocus}),d.a.createElement("div",{className:T,style:A}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.disabled?{currentState:"disabled"}:e.disabled||"disabled"!==t.currentState?null:{currentState:"normal"}}}]),t}(d.a.Component);T.defaultProps={min:0,max:100,value:50,component:"div"},t.a=b()(function(e){var t={duration:e.transitions.duration.short,easing:e.transitions.easing.easeOut},n=e.transitions.create(["width","height","box-shadow","left","top"],t),a={loaded:"#999999",loading:"#777777",handle:"#dddddd",primary:e.palette.primary.main,secondary:e.palette.grey[400],focused:e.palette.grey[500],disabled:e.palette.grey[400]};return{container:{position:"relative",width:"100%",margin:"10px 0",padding:"6px 0",cursor:"pointer",WebkitTapHighlightColor:"transparent","&$disabled":{cursor:"no-drop"},"&$vertical":{height:"100%",margin:"0 10px",padding:"0 6px"},"&$reverse":{transform:"scaleX(-1)"},"&$vertical$reverse":{transform:"scaleY(-1)"}},track:{position:"absolute",transform:"translate(0, -50%)",top:"50%",height:2,"&$focused, &$activated":{transition:"none"},"&$disabled":{backgroundColor:a.secondary},"&$vertical":{transform:"translate(-50%, 0)",left:"50%",top:"initial",width:2},"&$jumped":{}},trackBefore:{zIndex:1,left:0,backgroundColor:a.loaded,transition:n,"&$focused, &$activated, &$jumped":{backgroundColor:a.loaded}},trackAfter:{right:0,backgroundColor:a.loading,transition:n,"&$vertical":{bottom:0}},thumb:{position:"absolute",zIndex:2,transform:"translate(-50%, -50%)",width:12,height:12,borderRadius:"50%",transition:n,backgroundColor:a.handle,"&$focused":{boxShadow:"0px 0px 0px 9px ".concat(Object(O.fade)(a.handle,.16))},"&$activated":{width:17,height:17,transition:"none"},"&$disabled":{cursor:"no-drop",width:9,height:9,backgroundColor:a.disabled},"&$zero":{border:"2px solid ".concat(a.disabled),backgroundColor:"transparent"},"&$focused$zero":{border:"2px solid ".concat(a.focused),backgroundColor:Object(O.fade)(a.focused,.34),boxShadow:"0px 0px 0px 9px ".concat(Object(O.fade)(a.focused,.34))},"&$activated$zero":{border:"2px solid ".concat(a.focused)},"&$jumped":{width:17,height:17}},focused:{},activated:{},disabled:{},zero:{},vertical:{},reverse:{},jumped:{}}},{name:"MuiSlider",withTheme:!0})(T)}).call(this,n(29))},316:function(e,t,n){e.exports=n.p+"static/media/pocketnc.2eac3182.png"},335:function(e,t,n){e.exports=n(744)},343:function(e,t,n){},362:function(e,t){},364:function(e,t){},396:function(e,t){},397:function(e,t){},464:function(e,t){},658:function(e,t){ace.define("ace/mode/gcode_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){var a=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,r=function(){var e=this.createKeywordMapper({"support.function":"ATAN|ABS|ACOS|ASIN|SIN|COS|EXP|FIX|FUP|ROUND|LN|TAN",keyword:"IF|DO|WHILE|ENDWHILE|CALL|ENDIF|SUB|ENDSUB|GOTO|REPEAT|ENDREPEAT|CALL","constant.language":"PI"},"identifier",!0);this.$rules={start:[{token:"comment",regex:"\\(.*\\)"},{token:"blockNumber",regex:"([N])([0-9]+)"},{token:"string",regex:"([G])([0-9]+\\.?[0-9]?)"},{token:"string",regex:"([M])([0-9]+\\.?[0-9]?)"},{token:"constant.numeric",regex:"([-+]?([0-9]*\\.?[0-9]+\\.?))|(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)"},{token:e,regex:"[A-Z]"},{token:"keyword.operator",regex:"EQ|LT|GT|NE|GE|LE|OR|XOR"},{token:"paren.lparen",regex:"[\\[]"},{token:"paren.rparen",regex:"[\\]]"},{token:"text",regex:"\\s+"}]}};a.inherits(r,i),t.GcodeHighlightRules=r}),ace.define("ace/mode/gcode",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/gcode_highlight_rules","ace/range"],function(e,t,n){var a=e("../lib/oop"),i=e("./text").Mode,r=e("./gcode_highlight_rules").GcodeHighlightRules,o=function(){this.HighlightRules=r,this.$behaviour=this.$defaultBehaviour};a.inherits(o,i),function(){this.$id="ace/mode/gcode"}.call(o.prototype),t.Mode=o})},661:function(e,t,n){},744:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"FIVE_AXIS",function(){return D}),n.d(a,"TRIVIAL",function(){return Z});var i={};n.r(i),n.d(i,"toolOrientation",function(){return Te}),n.d(i,"workPieceSpace",function(){return Ce}),n.d(i,"forwardFiveAxis",function(){return Le}),n.d(i,"inverseFiveAxis",function(){return Ge}),n.d(i,"kinematics",function(){return ke}),n.d(i,"limits",function(){return Ae}),n.d(i,"jointLabels",function(){return Pe}),n.d(i,"getLimitErrors",function(){return Re});var r={};n.r(r),n.d(r,"BASE",function(){return kt}),n.d(r,"B_AXIS",function(){return At}),n.d(r,"A_AXIS",function(){return Pt}),n.d(r,"Y_AXIS",function(){return Rt}),n.d(r,"TOOL",function(){return It});var o={};n.r(o),n.d(o,"messages",function(){return ra}),n.d(o,"annotations",function(){return oa}),n.d(o,"maxLimitMessage",function(){return sa}),n.d(o,"minLimitMessage",function(){return ca}),n.d(o,"unimplementedMessages",function(){return la}),n.d(o,"nonSummarizedErrors",function(){return ua}),n.d(o,"nonSummarizedWarnings",function(){return da}),n.d(o,"setToolLengthOffsetMessages",function(){return ha});var s={};n.r(s),n.d(s,"XY",function(){return Mi}),n.d(s,"ZX",function(){return Si}),n.d(s,"YZ",function(){return Oi}),n.d(s,"UV",function(){return wi}),n.d(s,"WU",function(){return Ei}),n.d(s,"VW",function(){return yi});var c={};n.r(c),n.d(c,"ABSOLUTE",function(){return ji}),n.d(c,"INCREMENTAL",function(){return xi}),n.d(c,"ABSOLUTE_ARC",function(){return Ti}),n.d(c,"INCREMENTAL_ARC",function(){return Ci});var l={};n.r(l),n.d(l,"INVERSE_TIME",function(){return Li}),n.d(l,"UNITS_PER_MINUTE",function(){return Gi}),n.d(l,"UNITS_PER_REVOLUTION",function(){return ki});var u={};n.r(u),n.d(u,"IN",function(){return Ai}),n.d(u,"MM",function(){return Pi});var d={};n.r(d),n.d(d,"OFF",function(){return Ri});var h=n(0),m=n.n(h),p=n(46),f=n.n(p),g=(n(343),n(26)),v=n(16),b=n(15),M=n(32),S=n(31),O=n(33),w=n(39),E=n.n(w),y=n(193),j=n.n(y),x=n(301),T=n.n(x),C=function(){function e(){Object(v.a)(this,e),this.callback=function(e){e&&console.error("Error while issuing analytics request",e)};var t=window.sessionStorage,n=t.getItem("uuid");n||(n=j()(),t.setItem("uuid",n)),this.visitor=T()("UA-129057873-1",n),this.originalVisitor=this.visitor}return Object(b.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(b.a)(e,[{key:"pageview",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.visitor=(e=this.visitor).pageview.apply(e,n),this}},{key:"send",value:function(){return this.visitor.send(),this.visitor=this.originalVisitor,this}},{key:"event",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.visitor=(e=this.visitor).event.apply(e,n),this}},{key:"exception",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.visitor=(e=this.visitor).exception.apply(e,n),this}},{key:"timing",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.visitor=(e=this.visitor).timing.apply(e,n),this}}]),e}().getInstance,L=n(302),G=n(303),k=n.n(G),A=n(304),P=n.n(A),R=L;k()(R),R.STLLoader=P()(R);var I=R,N="OFF",_="CCW",F=n(3),D="FIVE_AXIS",Z="TRIVIAL",B=n(4),z=n.n(B),U=n(76),X=n(6),H=Object(X.b)({MACHINE_STATE:{DISTANCE_MODE:{SET_ABSOLUTE:void 0,SET_INCREMENTAL:void 0,SET_ABSOLUTE_ARC:void 0,SET_INCREMENTAL_ARC:void 0}}}),V=Object(X.b)({MACHINE_STATE:{FEED_RATE_MODE:{SET_INVERSE_TIME:void 0,SET_UNITS_PER_MINUTE:void 0,SET_UNITS_PER_REVOLUTION:void 0}}}),Y=Object(X.b)({MACHINE_STATE:{FEED_RATE:{SET:function(e){return e}}}}),W=Object(X.b)({MACHINE_STATE:{UNITS:{SET_IN:void 0,SET_MM:void 0}}}),$=Object(X.b)({MACHINE_STATE:{KINEMATICS_MODE:{SET_FIVE_AXIS:void 0,SET_TRIVIAL:void 0}}}),K=Object(X.b)({MACHINE_STATE:{CUTTER_COMPENSATION:{OFF:void 0}}}),q=Object(X.b)({MACHINE_STATE:{MOTION:{OFF:void 0,RAPID:void 0,LINEAR:void 0,ARC_C_W:void 0,ARC_C_C_W:void 0,SET_POSITION:void 0,NON_MOTION_COMMAND:void 0}}}),J=Object(X.b)({MACHINE_STATE:{PLANE_SELECT:{SET_X_Y:void 0,SET_Z_X:void 0,SET_Y_Z:void 0,SET_U_V:void 0,SET_W_U:void 0,SET_V_W:void 0}}}),Q=Object(X.b)({MACHINE_STATE:{SPINDLE_CONTROL:{OFF:void 0,CW:void 0,CCW:void 0}}}),ee=Object(X.b)({MACHINE_STATE:{SPINDLE_SPEED:{SET:void 0}}}),te=Object(X.b)({MACHINE_STATE:{TOOL:{SET:void 0,CHANGE:void 0,SET_TOOL_LENGTH_OFFSET:void 0,CLEAR_TOOL_LENGTH_OFFSET:void 0,TABLE:{SET_TOOL:void 0}}}}),ne={machineState:Object(U.a)({},H.machineState,V.machineState,Y.machineState,$.machineState,J.machineState,W.machineState,K.machineState,q.machineState,Q.machineState,ee.machineState,te.machineState)},ae={G4:!0,G5:!0,"G5.1":!0,"G5.2":!0,"G5.3":!0,G7:!0,G8:!0,G10:!0,"G17.1":!0,"G18.1":!0,"G19.1":!0,G28:!0,"G28.1":!0,G30:!0,"G30.1":!0,G33:!0,"G33.1":!0,"G38.2":!0,"G38.3":!0,"G38.4":!0,"G38.5":!0,G41:!0,G42:!0,"G41.1":!0,"G42.1":!0,"G43.1":!0,"G43.2":!0,G54:!0,G55:!0,G56:!0,G57:!0,G58:!0,G59:!0,"G59.1":!0,"G59.2":!0,"G59.3":!0,G61:!0,"G61.1":!0,G64:!0,G73:!0,G76:!0,G80:!0,G81:!0,G82:!0,G83:!0,G84:!0,G85:!0,G86:!0,G87:!0,G88:!0,G89:!0,G92:!0,"G92.1":!0,"G92.2":!0,"G92.3":!0,G95:!0,G96:!0,G97:!0,G98:!0,G99:!0,M0:!0,M1:!0,M2:!0,M30:!0,M7:!0,M8:!0,M9:!0,M19:!0,M48:!0,M49:!0,M50:!0,M51:!0,M52:!0,M53:!0,M61:!0,M62:!0,M63:!0,M64:!0,M65:!0,M66:!0,M67:!0,M68:!0,M70:!0,M71:!0,M72:!0,M73:!0},ie={G0:"Move at machine's maximum speed.",G1:"Move at the current feed rate.",G2:"Make a clockwise arc move.",G3:"Make a counter-clockwise arc move.",G4:"Dwell in place.",G5:"Make a cubic spline move.","G5.1":"Make a quadratic spline move.","G5.2":"Make a NURBS move.","G5.3":"Make a NURBS move.",G80:"Cancel canned cycle.",G17:"Select XY plane.",G18:"Select XZ plane.",G19:"Select YZ plane.",G40:"Turn off cutter compensation.",G43:"Enable tool length offset.",G49:"Disable tool length offset.",G60:"Enable 5-axis inverse kinematics.","G60.1":"Disable 5-axis inverse Kinematics.",G90:"Set absolute distance mode.",G91:"Set incremental distance mode.","G90.1":"Set absolute arc distance mode.","G91.1":"Set incremental arc distance mode.",G93:"Set inverse time feed rate mode.",G94:"Set units per minute feed rate mode.",G7:"Enable lathe diameter mode.",G8:"Enable lathe radius mode.",G10:"Set tool table and coordinate system.","G17.1":"Select UV plane.","G18.1":"Select WU plane.","G19.1":"Select VW plane.",G28:"Go to predefined absolute position stored in parameters 5161-5166.","G28.1":"Store current position in parameters 5161-5166",G30:"Go to predefined absolute position stored in parameters 5181-5186.","G30.1":"Store current position in parameters 5181-5186.",G33:"Spindle synchronized motion.","G33.1":"Rigid tapping.","G38.2":"Probe toward workpiece, stop on contact, signal error if failure.","G38.3":"Probe toward workpiece, stop on contact.","G38.4":"Probe away from workpiece, stop on loss of contact, signal error if failure.","G38.5":"Probe away from workpiece, stop on loss of contact.",G41:"Enable cutter compensation left of programmed path.",G42:"Enable cutter compensation right of programmed path.","G41.1":"Enable cutter compensation left of programmed path with tool diameter.","G42.1":"Enable cutter compensation right of programmed path with tool diameter.","G43.1":"Dynamic tool length offset.","G43.2":"Apply additional tool length offset.",G54:"Select coordinate system 1 (the default).",G55:"Select coordinate system 2.",G56:"Select coordinate system 3.",G57:"Select coordinate system 4.",G58:"Select coordinate system 5.",G59:"Select coordinate system 6.","G59.1":"Select coordinate system 7.","G59.2":"Select coordinate system 8.","G59.3":"Select coordinate system 9.",G61:"Enable exact path mode.","G61.1":"Enable exact path mode.",G64:"Set path blending parameters.",G73:"Drilling cycle with chip breaking.",G76:"Threading cycle.",G81:"Drilling cycle.",G82:"Drilling cycle, dwell.",G83:"Peck drilling cycle.",G84:"Right-hand tapping cycle.",G85:"Boring cycle, feed out.",G86:"Boring cycle, spindle stop, rapid move out.",G87:"Back boring cycle.",G88:"Boring cycle, spindle stop, manual out.",G89:"Boring cycle, dwell, feed out.",G92:"Offsets the coordinate system by setting the current point to the axis numbers you want and stores the offsets in parameters 5211-5219.","G92.1":"Reset G92 offsets to zero and sets parameters 5211-5219 to zero.","G92.2":"Reset G92 offsets to zero.","G92.3":"Set the G92 offsets to the values saved in parameters 5211-5219.",G95:"Set units per revolution feed rate mode.",G96:"Spindle control mode, constant surface speed.",G97:"Spindle control mode, RPM mode.",G98:"Retract to the position that axis was in just before this series of one or more contiguous canned cycles was started.",G99:"Retract to the position specified by the R word of the canned cycle.",M3:"Turn on spindle going clockwise.",M4:"Turn on spindle going counter-clockwise.",M5:"Turn off spindle.",M6:"Change tool.",M0:"Pause program.",M1:"Pause program if optional stop switch is on.",M2:"End the program. Pressing cycle start will start the program at the beginning of the file.",M30:"End the program. Pressing cycle start will start the program at the beginning of the file.",M7:"Turn mist coolant on.",M8:"Turn flood coolant on.",M9:"Turn both mist and flood coolant off.",M19:"Orient spindle.",M48:"Enable speed and feed rate override controls.",M49:"Disable spindle speed and feed rate override controls.",M50:"Feed override control.",M51:"Spindle speed override control.",M52:"Use adaptive feed.",M53:"Enable feed stop switch.",M61:"Change the current tool number while in MDI or Manual mode.",M62:"Turn on digital output synchronized with motion.",M63:"Turn on digital output synchronized with motion.",M64:"Turn on digital output immediately.",M65:"Turn on digital output immediately.",M66:"Wait on digital input.",M67:"Set an analog output synchronized with motion.",M68:"Set an analog output immediately.",M70:"Save modal state.",M71:"Invalidate saved modal state.",M72:"Restore modal state.",M73:"Save modal state with a subroutine and restore state on subroutine endsub or any return path."},re={G0:ne.machineState.motion.rapid,G1:ne.machineState.motion.linear,G2:ne.machineState.motion.arcCW,G3:ne.machineState.motion.arcCCW,G17:ne.machineState.planeSelect.setXY,G18:ne.machineState.planeSelect.setZX,G19:ne.machineState.planeSelect.setYZ,G40:ne.machineState.cutterCompensation.off,G43:ne.machineState.tool.setToolLengthOffset,G49:ne.machineState.tool.clearToolLengthOffset,G60:ne.machineState.kinematicsMode.setFiveAxis,"G60.1":ne.machineState.kinematicsMode.setTrivial,G90:ne.machineState.distanceMode.setAbsolute,G91:ne.machineState.distanceMode.setIncremental,"G90.1":ne.machineState.distanceMode.setAbsoluteArc,"G91.1":ne.machineState.distanceMode.setIncrementalArc,G93:ne.machineState.feedRateMode.setInverseTime,G94:ne.machineState.feedRateMode.setUnitsPerMinute,M3:ne.machineState.spindleControl.cw,M4:ne.machineState.spindleControl.ccw,M5:ne.machineState.spindleControl.off,M6:ne.machineState.tool.change},oe={G20:ne.machineState.units.setIn,G21:ne.machineState.units.setMm},se={T:ne.machineState.tool.set,S:ne.machineState.spindleSpeed.set,F:ne.machineState.feedRate.set},ce={G53:!0},le=function(e){return ie[e]},ue=ne.machineState.motion.setPosition,de="error",he="warning",me="info",pe="UNIMPLEMENTED",fe="UNRECOGNIZED",ge="MINIMUM_LIMIT",ve="MAXIMUM_LIMIT",be="MULTIPLE_COMMANDS_IN_MODAL_GROUP",Me="MULTIPLE_COMMANDS_WITH_POSITIONAL_ARGS",Se="ZERO_FEED_RATE",Oe="SET_TOOL_LENGTH_OFFSET",we="TOOL_LENGTH_OFFSET_COMMAND_DIFFERS_FROM_LOADED_TOOL";function Ee(e,t){return{message:"Can't run multiple commands in the same modal group on the same line. Codes "+e.slice(0,e.length-1).join(", ")+" and "+e[e.length-1]+" are in modal group "+t+".",codes:e,group:t,type:be,severity:de}}function ye(e,t){return{message:e+" axis exceeded maximum limit by "+t.toFixed(4)+".",axis:e,amount:t,type:ve,severity:de}}function je(){return{message:"Feed rate must be greater than 0 for linear or arc moves.",severity:de,type:Se}}function xe(e,t){return Object(U.a)({},e,{line:t})}var Te=function(e){var t=e.get(3),n=e.get(4),a=t*Math.PI/180,i=n*Math.PI/180,r=Math.cos(a),o=Math.sin(a),s=Math.cos(i),c=Math.sin(i);return z.a.Map({X:-c*r,Y:o,Z:s*r})},Ce=function(e,t){return Le(e.set(2,e.get(2)),t)},Le=function(e,t){var n=e.get(3),a=e.get(4),i=n*Math.PI/180,r=a*Math.PI/180,o=Math.cos(i),s=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=t,d=e.get(0),h=e.get(1),m=e.get(2),p=d*c+h*l*s-(m-u)*l*o,f=h*o+(m-u)*s,g=d*l-h*c*s+(m-u)*c*o;return z.a.Map({X:p,Y:f,Z:g,A:n,B:a})},Ge=function(e,t){var n=e.get("A"),a=e.get("B"),i=n*Math.PI/180,r=a*Math.PI/180,o=Math.cos(i),s=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=t,d=e.get("X"),h=e.get("Y"),m=e.get("Z"),p=d*c+m*l,f=d*l*s+h*o-m*c*s,g=-d*l*o+h*s+m*c*o+u;return z.a.List([p,f,g,n,a])},ke={inverseKinematics:function(e,t){var n=e.get("kinematicsMode"),a=0;t||(a=e.get("tool").get("toolLengthOffset").get("Z"));var i=e.get("motion").get("position");return n===D?Ge(i,a):z.a.List([i.get("X"),i.get("Y"),i.get("Z")+a,i.get("A"),i.get("B")])},forwardKinematics:function(e,t){var n=e.get("kinematicsMode"),a=t?0:e.get("tool").get("toolLengthOffset").get("Z"),i=e.get("joints");return n===D?Le(i,a):z.a.Map({X:i.get(0),Y:i.get(1),Z:i.get(2)-a,A:i.get(3),B:i.get(4)})}},Ae={extents:{max:[2.55,2.55,.1,135,9999],min:[-2,-2.5,-3.45,-25,-9999]},velocities:[1,1,1,37.5,37.5]},Pe=["X","Y","Z","A","B"],Re=function(e){for(var t,n,a=[],i=0;i<e.size;i++){var r=e.get(i);r<Ae.extents.min[i]?a.push((t=Pe[i],n=Math.abs(r-Ae.extents.min[i]),{message:t+" axis exceeded minimum limit by "+n.toFixed(4)+".",axis:t,amount:n,type:ge,severity:de})):r>Ae.extents.max[i]&&a.push(ye(Pe[i],Math.abs(r-Ae.extents.max[i])))}return a.length>0?a:[]},Ie=Object(F.a)({},"V2",i),Ne=function(){return new I.ShaderMaterial({uniforms:{offset:{value:.004},minTime:{value:0},maxTime:{value:9999999999},minLine:{value:0},maxLine:{value:9999999999},maxY:{value:99999999},maxXZ:{value:99999999}},vertexColors:I.VertexColors,vertexShader:"\nuniform float minTime;\nuniform float maxTime;\nuniform float minLine;\nuniform float maxLine;\nuniform float offset;\nuniform float maxXZ;\nuniform float maxY;\n\nattribute float line;\nattribute float time;\nattribute float speed;\nvarying vec3 vPos;\nvarying vec3 vColor;\nvarying float vLine;\nvarying float vTime;\nvoid main() {\n  vPos = position + offset*normal;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( vPos, 1.0 );\n  vColor = color;\n  vLine = line;\n  vTime = time;\n}\n",fragmentShader:"\nuniform float minTime;\nuniform float maxTime;\nuniform float minLine;\nuniform float maxLine;\nuniform float maxXZ;\nuniform float maxY;\n\nvarying vec3 vColor;\nvarying vec3 vPos;\nvarying float vLine;\nvarying float vTime;\nvoid main()\t{\n  if(length(vPos.xz) > maxXZ || \n     abs(vPos.y) > maxY ||\n     vTime < minTime || vTime > maxTime ||\n     vLine < minLine || vLine > maxLine) {\n\n    discard;\n  }\n  gl_FragColor = vec4(vColor, 1.);\n}\n"})},_e=new Float32Array([0,0,.5]),Fe=new Float32Array([1,1,1]),De=(new Float32Array([1,.5,0]),new Float32Array([0,0,1]),function(){function e(t,n){Object(v.a)(this,e);var a="object"===typeof t;if(this.capacity=a?2*t.capacity:t,this.numPoints=0,this.geometry=new I.BufferGeometry,this.vertices=new Float32Array(3*this.capacity),this.colors=new Float32Array(3*this.capacity),this.normals=new Float32Array(3*this.capacity),this.lines=new Float32Array(this.capacity),this.times=new Float32Array(this.capacity),a){var i=t;this.vertices.set(i.vertices),this.colors.set(i.colors),this.normals.set(i.normals),this.lines.set(i.lines),this.times.set(i.times),this.geometry.setDrawRange(i.geometry.drawRange.start,i.geometry.drawRange.count),this.numPoints=i.numPoints}this.geometry.addAttribute("position",new I.BufferAttribute(this.vertices,3)),this.geometry.addAttribute("color",new I.BufferAttribute(this.colors,3)),this.geometry.addAttribute("normal",new I.BufferAttribute(this.normals,3)),this.geometry.addAttribute("line",new I.BufferAttribute(this.lines,1)),this.geometry.addAttribute("time",new I.BufferAttribute(this.times,1)),a&&(this.geometry.attributes.position.updateRange.offset=0,this.geometry.attributes.color.updateRange.offset=0,this.geometry.attributes.normal.updateRange.offset=0,this.geometry.attributes.line.updateRange.offset=0,this.geometry.attributes.time.updateRange.offset=0,this.geometry.attributes.position.updateRange.count=3*this.numPoints,this.geometry.attributes.color.updateRange.count=3*this.numPoints,this.geometry.attributes.normal.updateRange.count=3*this.numPoints,this.geometry.attributes.line.updateRange.count=this.numPoints,this.geometry.attributes.time.updateRange.count=this.numPoints,this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0,this.geometry.attributes.normal.needsUpdate=!0,this.geometry.attributes.line.needsUpdate=!0,this.geometry.attributes.time.needsUpdate=!0),this.geometry.attributes.position.setDynamic(!0),this.geometry.attributes.color.setDynamic(!0),this.geometry.attributes.normal.setDynamic(!0),this.geometry.attributes.line.setDynamic(!0),this.geometry.attributes.time.setDynamic(!0),this.geometry.setDrawRange(0,0),this.object=new I.Line(this.geometry,n),this.object.frustumCulled=!1}return Object(b.a)(e,[{key:"clear",value:function(){this.numPoints=0,this.updateDrawRange()}},{key:"updateDrawRange",value:function(){this.geometry.setDrawRange(0,this.numPoints)}},{key:"updateAttribute",value:function(e,t,n){var a=this.geometry.attributes[e];a.updateRange.count>-1?(a.updateRange.count+=n,a.needsUpdate=!0):(a.updateRange.offset=t,a.updateRange.count=n,a.needsUpdate=!0)}},{key:"addPoint",value:function(e){var t=3*this.numPoints;this.vertices[t]=e.position[0],this.vertices[t+1]=e.position[1],this.vertices[t+2]=e.position[2],this.colors[t]=e.color[0],this.colors[t+1]=e.color[1],this.colors[t+2]=e.color[2],this.normals[t]=e.normal[0],this.normals[t+1]=e.normal[1],this.normals[t+2]=e.normal[2],this.lines[this.numPoints]=e.line,this.times[this.numPoints]=e.time,this.updateAttribute("position",t,3),this.updateAttribute("color",t,3),this.updateAttribute("normal",t,3),this.updateAttribute("line",this.numPoints,1),this.updateAttribute("time",this.numPoints,1),this.numPoints++,this.updateDrawRange()}}]),e}()),Ze=function(){function e(){Object(v.a)(this,e),this.material=Ne(),this.object=new I.Group,this.lineObject=new De(1e5,this.material),this.object.frustumCulled=!1,this.object.add(this.lineObject.object)}return Object(b.a)(e,null,[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),Object(b.a)(e,[{key:"clear",value:function(){this.lineObject.clear()}},{key:"setMaxXZ",value:function(e){this.material.uniforms.maxXZ.value=e}},{key:"setMaxY",value:function(e){this.material.uniforms.maxY.value=e}},{key:"setOffset",value:function(e){this.material.uniforms.offset.value=e}},{key:"setMinLine",value:function(e){this.material.uniforms.minLine.value=e}},{key:"setMaxLine",value:function(e){this.material.uniforms.maxLine.value=e}},{key:"setMinTime",value:function(e){this.material.uniforms.minTime.value=e}},{key:"setMaxTime",value:function(e){this.material.uniforms.maxTime.value=e}},{key:"addPoints",value:function(e){var t=this;e.forEach(function(e){t.lineObject.numPoints===t.lineObject.capacity&&(t.object.remove(t.lineObject.object),t.lineObject=new De(t.lineObject,t.material),t.object.add(t.lineObject.object)),t.lineObject.addPoint(e)})}}]),e}(),Be=function(){return new I.ShaderMaterial({uniforms:{hitNormal:{value:new I.Vector3},texture:{type:"t"},opacity:{value:.25}},vertexColors:I.VertexColors,vertexShader:"\n      varying vec3 vNormal;\n      varying vec2 vUV;\n      void main() {\n        vNormal = normal;\n        vUV = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }\n    ",fragmentShader:"\n      uniform sampler2D texture;\n      uniform vec3 hitNormal;\n      uniform float opacity;\n\n      varying vec3 vNormal;\n      varying vec2 vUV;\n      void main() {\n        vec3 multColor = vec3(1,1,1);\n        if(dot(vNormal, hitNormal) > .99) {\n          multColor = vec3(.3,.7, .9);\n        }\n        gl_FragColor = vec4(texture2D(texture, vUV).xyz*multColor, opacity);\n      }\n    "})},ze=function(){function e(t,n,a,i,r){var o=this;Object(v.a)(this,e),this.callbacks={click:[],mouseover:[]},this.left=n,this.top=a,this.width=i,this.height=r,this.opacity=.25,this.scene=new I.Scene;var s=this.height/this.width;this.camera=new I.OrthographicCamera(-2.5,2.5,2.5*s,-2.5*s,-2.5,2.5),this.scene.add(this.camera),this.raycaster=new I.Raycaster,this.material=new Be;var c=new I.OBJLoader,l=new I.TextureLoader;c.load("models/rhombicuboctahedron.obj",function(e){o.object=e,e.traverse(function(e){e instanceof I.Mesh&&(e.material=o.material)}),o.scene.add(e),o.loadedModel=!0,o.loaded=o.loadedModel&&o.loadedTexture},function(e){},function(e){console.error(e)}),this.material.uniforms.texture.value=l.load("textures/viewCube.png",function(e){o.material.uniforms.texture.value=e,o.loadedTexture=!0,o.loaded=o.loadedModel&&o.loadedTexture},void 0,function(e){console.error(e)}),t.addEventListener("click",function(e){var t=e.offsetX-o.left,n=e.offsetY,a=t/o.width*2-1,i=-n/o.height*2+1;if(o.loaded&&a>-1&&a<1&&i>-1&&i<1){o.raycaster.set(new I.Vector3(2.5*a,2.5*i,10).applyQuaternion(o.camera.quaternion),new I.Vector3(0,0,-1).applyQuaternion(o.camera.quaternion));var r=o.raycaster.intersectObject(o.object,!0);if(r.length>0){var s=r[0];o.doCallback("click",s.face.normal)}}}),t.addEventListener("mousemove",function(e){var t=e.offsetX-o.left,n=e.offsetY,a=t/o.width*2-1,i=-n/o.height*2+1;if(o.loaded)if(a>-1&&a<1&&i>-1&&i<1){o.raycaster.set(new I.Vector3(2.5*a,2.5*i,10).applyQuaternion(o.camera.quaternion),new I.Vector3(0,0,-1).applyQuaternion(o.camera.quaternion));var r=o.raycaster.intersectObject(o.object,!0);if(r.length>0){var s=r[0];o.doCallback("mouseover",s.face.normal),o.material.uniforms.hitNormal.value.copy(s.face.normal),o.opacity=1}else o.material.uniforms.hitNormal.value.set(0,0,0),o.opacity=.25}else o.material.uniforms.hitNormal.value.set(0,0,0),o.opacity=.25})}return Object(b.a)(e,[{key:"doCallback",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.callbacks[e].forEach(function(e){return e.apply(void 0,n)})}},{key:"addEventListener",value:function(e,t){this.callbacks[e].push(t)}},{key:"removeEventListener",value:function(e,t){this.callbacks[e].splice(this.callbacks[e].indexOf(t),1)}},{key:"setOrientation",value:function(e){this.camera.quaternion.copy(e)}},{key:"setPosition",value:function(e,t){this.left=e,this.top=t}},{key:"setDimensions",value:function(e,t){this.width=e,this.height=t}},{key:"step",value:function(e){this.material.uniforms.opacity.value=.9*this.material.uniforms.opacity.value+.1*this.opacity,this.material.uniforms.opacity.value<1?this.material.transparent=!0:this.material.transparent=!1}},{key:"render",value:function(e){this.loaded&&(e.setViewport(this.left,this.top,this.width,this.height),e.setScissor(this.left,this.top,this.width,this.height),e.setScissorTest(!0),e.clearDepth(),e.render(this.scene,this.camera))}}]),e}(),Ue=function(){function e(t,n){var a=this;Object(v.a)(this,e),this.handleWheel=function(e){e.deltaY<0?(a.spherical.radius*=.95,a.orthographicCamera.zoom/=.95):e.deltaY>0&&(a.spherical.radius/=.95,a.orthographicCamera.zoom*=.95),a.orthographicCamera.zoom=Math.min(50,Math.max(.1,a.orthographicCamera.zoom)),a.orthographicCamera.updateProjectionMatrix(),a.spherical.radius=Math.min(50,Math.max(.1,a.spherical.radius))},this.width=n.width,this.height=n.height,this.spherical=new I.Spherical(16,Math.PI/4,-Math.PI/2),this.spherical.makeSafe(),this.currentSpherical=new I.Spherical(16,Math.PI/4,-Math.PI/2),this.currentSpherical.makeSafe(),this.Y=new I.Vector3(0,1,0),this.X=new I.Vector3(1,0,0),this.rotatedX=new I.Vector3(1,0,0),this.focus=new I.Vector3(0,0,0),this.parent=new I.Object3D,this.parentPosition=new I.Vector3,this.parentOrientation=new I.Quaternion,this.worldPosition=new I.Vector3(-16,0,0),this.worldOrientation=new I.Quaternion,this.localOrientation=new I.Quaternion,this.phiOrientation=new I.Quaternion,this.thetaOrientation=new I.Quaternion,this.localOrientation.setFromAxisAngle(new I.Vector3(0,1,0),-Math.PI/2),this.worldOrientation.copy(this.localOrientation),this.startRotate=new I.Vector2,this.dRotate=new I.Vector2,this.transitionFilter=.1,this.transitionSphericalFilter=.4,this.rotateFilter=.4,this.rotateSphericalFilter=.8,this.lockedFilter=1,this.lockedSphericalFilter=1,this.filter=1,this.sphericalFilter=1,this.scene=t;var i=this.width/this.height,r=this.height/this.width;this.perspectiveCamera=new I.PerspectiveCamera(60,i,.1,1e3),this.orthographicCamera=new I.OrthographicCamera(-10,10,10*r,-10*r,-100,100),this.camera=this.perspectiveCamera,this.camera.position.x=-3,this.scene.add(this.camera),this.canvas=n,this.canvas.addEventListener("wheel",function(e){return e.preventDefault(),e.stopPropagation(),a.handleWheel(e),!1},!1),this.canvas.addEventListener("mousedown",function(e){e.preventDefault(),e.button===I.MOUSE.LEFT&&(a.startRotate.set(e.offsetX,e.offsetY),a.rotating=!0,a.filter=a.rotateFilter,a.sphericalFilter=a.rotateSphericalFilter)},!1),document.addEventListener("mouseup",function(e){e.preventDefault(),e.button===I.MOUSE.LEFT&&(a.rotating=!1,a.filter=a.transitionFilter,a.sphericalFilter=a.transitionSphericalFilter)},!1),this.canvas.addEventListener("mousemove",function(e){a.rotating&&(a.dRotate.x=e.offsetX-a.startRotate.x,a.dRotate.y=e.offsetY-a.startRotate.y,a.spherical.theta-=2*Math.PI*a.dRotate.x/a.width*2,a.spherical.phi-=2*Math.PI*a.dRotate.y/a.height*2,a.spherical.makeSafe(),a.startRotate.x=e.offsetX,a.startRotate.y=e.offsetY)}),this.canvas.addEventListener("touchstart",function(e){switch(e.touches.length){case 1:a.startRotate.set(e.touches[0].pageX,e.touches[0].pageY),a.rotating=!0,a.filter=a.rotateFilter,a.sphericalFilter=a.rotateSphericalFilter;break;case 2:a.rotating=!1;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;a.touchZoomStart=Math.sqrt(t*t+n*n)}}),document.addEventListener("touchend",function(e){switch(e.touches.length){case 1:a.startRotate.set(e.touches[0].pageX,e.touches[0].pageY),a.rotating=!0,a.filter=a.transitionFilter,a.sphericalFilter=a.transitionSphericalFilter;break;case 2:a.rotating=!1}}),this.canvas.addEventListener("touchmove",function(e){switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:a.dRotate.x=e.touches[0].pageX-a.startRotate.x,a.dRotate.y=e.touches[0].pageY-a.startRotate.y,a.spherical.theta-=2*Math.PI*a.dRotate.x/a.width*2,a.spherical.phi-=2*Math.PI*a.dRotate.y/a.height*2,a.spherical.makeSafe(),a.startRotate.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:a.rotating=!1;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n),r=i-a.touchZoomStart;r>0?(a.spherical.radius*=.95,a.orthographicCamera.zoom/=.95):r<0&&(a.spherical.radius/=.95,a.orthographicCamera.zoom*=.95),a.orthographicCamera.zoom=Math.min(50,Math.max(.1,a.orthographicCamera.zoom)),a.orthographicCamera.updateProjectionMatrix(),a.spherical.radius=Math.min(50,Math.max(.1,a.spherical.radius)),a.touchZoomStart=i}})}return Object(b.a)(e,[{key:"updateCanvasDimensions",value:function(e,t){this.width=e,this.height=t;var n=this.width/this.height,a=this.height/this.width;this.perspectiveCamera.aspect=n,this.perspectiveCamera.updateProjectionMatrix(),this.orthographicCamera.top=10*a,this.orthographicCamera.bottom=-10*a,this.orthographicCamera.updateProjectionMatrix()}},{key:"setPerspective",value:function(){this.camera=this.perspectiveCamera}},{key:"setOrthographic",value:function(){this.camera=this.orthographicCamera}},{key:"update",value:function(){var e=this.filter,t=this.sphericalFilter;this.currentSpherical.radius=(1-t)*this.currentSpherical.radius+t*this.spherical.radius,this.currentSpherical.phi=(1-t)*this.currentSpherical.phi+t*this.spherical.phi,this.currentSpherical.theta-this.spherical.theta>Math.PI?this.currentSpherical.theta-=2*Math.PI:this.spherical.theta-this.currentSpherical.theta>Math.PI&&(this.currentSpherical.theta+=2*Math.PI),this.currentSpherical.theta=(1-t)*this.currentSpherical.theta+t*this.spherical.theta,this.currentSpherical.makeSafe(),this.worldPosition.setFromSpherical(this.currentSpherical),this.parent.getWorldQuaternion(this.parentOrientation),this.parent.getWorldPosition(this.parentPosition),this.worldPosition.applyQuaternion(this.parentOrientation),this.worldPosition.add(this.parentPosition),this.thetaOrientation.setFromAxisAngle(this.Y,this.currentSpherical.theta),this.phiOrientation.setFromAxisAngle(this.rotatedX.copy(this.X).applyQuaternion(this.thetaOrientation),-Math.PI/2+this.currentSpherical.phi),this.localOrientation.copy(this.thetaOrientation),this.localOrientation.premultiply(this.phiOrientation),this.worldOrientation.copy(this.localOrientation),this.worldOrientation.premultiply(this.parentOrientation),this.perspectiveCamera.quaternion.slerp(this.worldOrientation,e),this.perspectiveCamera.position.lerp(this.worldPosition,e),this.orthographicCamera.quaternion.slerp(this.worldOrientation,e),this.orthographicCamera.position.lerp(this.worldPosition,e)}},{key:"transitionToDirection",value:function(e){var t=this.spherical.radius,n=this.spherical.theta;this.spherical.setFromVector3(e),this.spherical.radius=t,(this.spherical.phi<=1e-5||this.spherical.phi>=Math.PI-1e-5)&&(this.spherical.theta=n),this.filter=this.transitionFilter,this.sphericalFilter=this.transitionSphericalFilter}},{key:"setParent",value:function(e){e&&this.parent!==e&&(this.parent=e,this.filter=this.transitionFilter,this.sphericalFilter=this.transitionSphericalFilter)}}]),e}(),Xe="LONG",He="SHORT",Ve="NONE",Ye=C(),We=function(){function e(t){var n=this;Object(v.a)(this,e),this.showDentalFixture=function(){if(n.parts.dentalFixture)n.parts.dentalFixture.object.visible=!0;else{var e={id:"dentalFixture",path:"models/dental_fixture.obj",material:n.toolMaterial};n.objLoader.load(e.path,function(t){t.traverse(function(t){t instanceof I.Mesh&&(t.material=e.material)}),e.object=t,n.parts.dentalFixture=e,n.parts.bAxis.object.add(n.parts.dentalFixture.object)},function(e){},function(e){console.error(e)})}},this.hideDentalFixture=function(){n.parts.dentalFixture&&(n.parts.dentalFixture.object.visible=!1)},this.showModel=function(){n.parts.model&&(n.parts.model.object.visible=!0)},this.hideModel=function(){n.parts.model&&(n.parts.model.object.visible=!1)},this.loadSTLModel=function(e){var t=n.stlLoader.parse(e),a=new I.Mesh(t,n.modelMaterial);a.scale.x=1/25.4,a.scale.y=1/25.4,a.scale.z=1/25.4,n.parts.model?n.parts.bAxis.object.remove(n.parts.model.object):n.parts.model={id:"model",material:n.modelMaterial},n.parts.model.object=a,a.traverse(function(e){e instanceof I.Mesh&&(e.material=n.parts.model.material)}),n.parts.bAxis.object.add(n.parts.model.object)},this.loadObjModel=function(e){var t=n.objLoader.parse(e);t.scale.x=1/25.4,t.scale.y=1/25.4,t.scale.z=1/25.4,n.parts.model?n.parts.bAxis.object.remove(n.parts.model.object):n.parts.model={id:"model",material:n.modelMaterial},n.parts.model.object=t,t.traverse(function(e){e instanceof I.Mesh&&(e.material=n.parts.model.material)}),n.parts.bAxis.object.add(n.parts.model.object)},this.parentCameraToTool=function(){n.ready&&n.controls.setParent(n.parts.tool.object)},this.parentCameraToB=function(){n.ready&&n.controls.setParent(n.parts.bAxis.object)},this.parentCameraToA=function(){n.ready&&n.controls.setParent(n.parts.aAxis.object)},this.parentCameraToY=function(){n.ready&&n.controls.setParent(n.parts.yAxis.object)},this.parentCameraToBase=function(){n.ready&&n.controls.setParent(n.parts.base.object)},this.handleMouseMove=function(e){},this.update=function(e,t){var a=e.get("tool").get("loaded")-1,i=0,r=.125,o=Ve;if(a>=0){var s=e.get("tool").get("table").get(a);i=6.26+s.get("Z"),r=2*s.get("R"),o=s.get("holder")}var c=0;e.get("spindleControl")!==N&&(c=2*t*Math.PI*e.get("spindleSpeed"),e.get("spindleControl")===_&&(c*=-1)),n.machineState={tool_offset_z:e.get("tool").get("toolLengthOffset").get("Z"),tool_length:i,tool_diameter:r,tool_holder:o,joints:e.get("joints").toJS(),spindleAngle:c,limits:Ie[e.get("machine")].limits.extents,axes:"XYZAB"}},this.updateDimensions=function(e,t){n.width=e,n.height=t,n.renderer.setSize(n.width,n.height),n.controls.updateCanvasDimensions(e,t),n.viewCube.setPosition(e-150,0)},this.updateMachine=function(){n.ready&&(n.checkLimits(),n.controls.update(),n.parts.bAxis.object.rotation.y=n.machineState.joints[4]*Math.PI/180,n.parts.aAxis.object.rotation.x=n.machineState.joints[3]*Math.PI/180,n.parts.yAxis.object.position.y=-n.machineState.joints[1],n.parts.zAxis.object.position.z=6.26+n.machineState.joints[2],n.parts.xAxis.object.position.x=n.machineState.joints[0],n.parts.tool&&(n.parts.tool.object.position.z=-n.machineState.tool_length,n.parts.tool.object.scale.x=n.machineState.tool_diameter,n.parts.tool.object.scale.y=n.machineState.tool_diameter,n.parts.toolHolder.object.rotation.z=n.machineState.spindleAngle,n.parts.toolHolderShort.object.rotation.z=n.machineState.spindleAngle,n.machineState.tool_holder===He?(n.parts.toolHolderShort.object.visible=!0,n.parts.toolHolder.object.visible=!1):n.machineState.tool_holder===Xe?(n.parts.toolHolderShort.object.visible=!1,n.parts.toolHolder.object.visible=!0):(n.parts.toolHolderShort.object.visible=!1,n.parts.toolHolder.object.visible=!1)))},this.render=function(){n.renderer.clear(),n.renderer.setViewport(0,0,n.width,n.height),n.renderer.setScissorTest(!1),n.renderer.render(n.scene,n.controls.camera),n.viewCube.setOrientation(n.controls.localOrientation),n.viewCube.render(n.renderer)},this.checkLimits=function(){for(var e={0:n.parts.xAxis,1:n.parts.yAxis,2:n.parts.zAxis,3:n.parts.aAxis,4:n.parts.bAxis},t=0;t<n.machineState.joints.length;t++)n.machineState.joints[t]<n.machineState.limits.min[t]?(e[t].material&&(e[t].material.color=new I.Color(1,0,0),e[t].material.emissive=new I.Color(.3,0,0)),n.totalTime=0):n.machineState.joints[t]>n.machineState.limits.max[t]?(e[t].material&&(e[t].material.color=new I.Color(1,0,0),e[t].material.emissive=new I.Color(.3,0,0)),n.totalTime=0):e[t].material&&(e[t].material.color=new I.Color(1,1,1),e[t].material.emissive=new I.Color(0,0,0))},this.createLights=function(){var e=new I.DirectionalLight(16777215,.15);e.position.set(-30,30,30),e.lookAt(0,0,0);var t=new I.DirectionalLight(16777215,.15);t.position.set(-30,30,-30),t.lookAt(0,0,0);var a=new I.DirectionalLight(16777215,.07);a.position.set(30,30,30),a.lookAt(0,0,0);var i=new I.DirectionalLight(16777215,.07);i.position.set(30,30,-30),i.lookAt(0,0,0);var r=new I.DirectionalLight(16777215,.07);r.position.set(30,-30,-30),r.lookAt(0,0,0),n.scene.add(r),n.scene.add(e),n.scene.add(t),n.scene.add(a),n.scene.add(i)},this.findTime=function(e){if(e>=n.times[n.times.length-1])return n.times.length-1;for(var t=0,a=n.times.length-1,i=Math.floor(n.times.length/2);!(n.times[i]<e&&n.times[i+1]>=e);)n.times[i]>=e?a=i:t=i,i=Math.floor(.5*(t+a));return i},this.step=function(e){if(n.viewCube.step(e),n.doMove){n.time+=e;var t=n.time/n.totalTime;t>=1&&(t=1,n.totalTime=0,n.doMove=!1);for(var a=0;a<n.machineState.joints.length;a++)n.machineState.joints[a]=n.start[a]*(1-t)+n.end[a]*t}else if(n.runningProgram){n.time+=e*n.multiplier;var i=n.findTime(n.time),r=i<n.pts.length-1?i+1:i,o=n.times[i],s=n.times[r],c=(n.time-o)/(s-o);o>=n.times[n.times.length-1]&&(c=1);for(var l=0;l<n.machineState.joints.length;l++){var u=n.pts[i].pt[l]*(1-c)+n.pts[r].pt[l]*c;if(l>=0&&l<=2){var d=u-n.machineState.joints[l];Math.abs(d)/e>1.00001&&console.error("Movement in axis ",l," exceeded maximum movement speed on line",n.pts[r].lineNum)}else if(l>=3&&l<=4){var h=u-n.machineState.joints[l];Math.abs(h)/e>37.500001&&console.error("Movement in axis ",l," exceeded maximum movement speed on line",n.pts[r].lineNum)}n.machineState.joints[l]=u}}n.updateMachine()},this.startTime=E()(),this.backplot=Ze.getInstance(),this.scene=new I.Scene,this.scene.background=new I.Color(13421772),this.renderer=new I.WebGLRenderer({canvas:t}),this.renderer.autoClear=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.width=window.innerWidth,this.height=window.innerHeight,this.viewCube=new ze(t,this.width-150,0,100,100);this.viewCube.addEventListener("click",function(e){n.controls.transitionToDirection(e);var t=Math.max(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z)),a=e.x/t,i=e.y/t,r=e.z/t;Ye.event("ViewCube","clicked face ("+(a<1e-5&&a>-1e-5?0:a)+", "+(i<1e-5&&i>-1e-5?0:i)+", "+(r<1e-5&&r>-1e-5?0:r)+")").send()}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(16777215,1),this.controls=new Ue(this.scene,t),this.createLights();var a=new I.OBJLoader;this.stlLoader=new I.STLLoader,this.objLoader=a;var i=new I.TextureLoader;this.textureLoader=i;var r="textures/cube/",o=[r+"px.jpg",r+"nx.jpg",r+"py.jpg",r+"ny.jpg",r+"pz.jpg",r+"nz.jpg"];this.envMap=(new I.CubeTextureLoader).load(o),this.envMap.format=I.RGBFormat,this.envMap.mapping=I.CubeReflectionMapping;var s=new I.MeshStandardMaterial({color:4539717,metalness:1,roughness:.5,envMap:this.envMap,envMapIntensity:1.5});this.toolMaterial=new I.MeshStandardMaterial({color:16777215,metalness:1,roughness:.3,envMap:this.envMap});var c=this.toolMaterial,l=new I.MeshStandardMaterial({color:1118481,metalness:.5,roughness:.6,envMap:this.envMap,emissive:14483456}),u=new I.MeshStandardMaterial({color:16777215,metalness:.2,roughness:.6,envMap:this.envMap,emissive:4473929});this.modelMaterial=new I.MeshStandardMaterial({color:16777215,metalness:.5,roughness:.6,envMap:this.envMap,emissive:2236962});var d=[{id:"aAxis",path:"models/v2/aAxis.obj",map:"textures/v2/aAxisMap.png"},{id:"bAxis",path:"models/v2/bAxis.obj",map:"textures/v2/bAxisMap.png"},{id:"xAxis",path:"models/v2/xAxis.obj",map:"textures/v2/xAxisMap.png"},{id:"yAxis",path:"models/v2/yAxis.obj",map:"textures/v2/yAxisMap.png"},{id:"zAxis",path:"models/v2/zAxis.obj",map:"textures/v2/zAxisMap.png"},{id:"base",path:"models/v2/base.obj",map:"textures/v2/baseMap.png"},{id:"baseButtons",path:"models/v2/base_buttons.obj",material:c},{id:"estopRing",path:"models/v2/estop_ring.obj",material:l},{id:"startStopRing",path:"models/v2/start_stop_ring.obj",material:u},{id:"toolHolder",path:"models/long_tool_holder.obj",material:c},{id:"toolHolderShort",path:"models/short_tool_holder.obj",material:c},{id:"toolColletHolder",path:"models/long_tool_collet_holder.obj",material:s},{id:"toolColletHolderShort",path:"models/short_tool_collet_holder.obj",material:s}];this.parts={},d.forEach(function(e){a.load(e.path,function(t){e.material&&t.traverse(function(t){t instanceof I.Mesh&&(t.material=e.material)}),e.object=t,Ye.timing("Viewer3D","Loaded Model "+e.id,Math.round(E()()-n.startTime)).send()},function(e){},function(e){console.error(e)}),e.map?i.load(e.map,function(t){e.material=new I.MeshStandardMaterial({map:t,metalness:1,roughness:.4,envMapIntensity:1.25,envMap:n.envMap}),e.object&&e.object.traverse(function(t){t instanceof I.Mesh&&(t.material=e.material)}),Ye.timing("Viewer3D","Loaded Texture "+e.id,Math.round(E()()-n.startTime)).send()},void 0,function(e){console.error(e)}):e.object&&e.object.traverse(function(t){t instanceof I.Mesh&&(t.material=e.material)})});this.machineState={tool_offset_z:5,tool_length:0,tool_diameter:.125,spindleAngle:0,joints:[2.5,2.5,0,0,0],limits:{max:[2.55,2.6,.1,135,9999],min:[-2,-2.4,-3.45,-45,-9999]},axes:"XYZAB"},this.time=0,function e(){var t=!0;if(d.forEach(function(e){e.object&&e.material||(t=!1)}),t){d.forEach(function(e){n.parts[e.id]=e});var a=new I.CylinderGeometry(.5,.5,6,32),i=new I.SphereGeometry(.5,32,32),r=new I.Mesh(a,c),o=new I.Mesh(i,c),s=new I.Group;r.position.z=3,r.rotation.x=Math.PI/2,o.position.z=.03125,s.add(r),n.parts.tool={object:s,material:c},n.parts.zAxis.object.position.z=3,n.parts.aAxis.object.rotation.x=0,n.parts.xAxis.object.add(n.parts.zAxis.object),n.parts.yAxis.object.add(n.parts.aAxis.object),n.parts.zAxis.object.add(n.parts.tool.object),n.parts.zAxis.object.add(n.parts.toolHolder.object),n.parts.toolHolder.object.add(n.parts.toolColletHolder.object),n.parts.toolHolder.object.visible=!1,n.parts.zAxis.object.add(n.parts.toolHolderShort.object),n.parts.toolHolderShort.object.add(n.parts.toolColletHolderShort.object),n.parts.aAxis.object.add(n.parts.bAxis.object),n.controls.setParent(n.parts.yAxis.object),n.parts.bAxis.object.add(n.backplot.object),n.parts.base.object.add(n.parts.yAxis.object),n.parts.base.object.add(n.parts.xAxis.object),n.parts.base.object.add(n.parts.baseButtons.object),n.parts.base.object.add(n.parts.estopRing.object),n.parts.base.object.add(n.parts.startStopRing.object),n.scene.add(n.parts.base.object),n.ready=!0,Ye.timing("Viewer3D","Ready",Math.round(E()()-n.startTime)).send()}else window.setTimeout(e,500)}()}return Object(b.a)(e,null,[{key:"getInstance",value:function(){return e.instance}},{key:"createInstance",value:function(t){return e.instance=new e(t),e.instance}}]),e}(),$e=Object(X.b)({INTERPRETER:{SET_FILE_NAME:void 0,START_LOADING:void 0,END_LOADING:void 0,SET_LOADING_PROGRESS:void 0,SET_LINES:function(e,t){return{lines:e,preview:t}},START_PROCESSING:void 0,END_PROCESSING:void 0,SET_PROCESSING_PROGRESS:void 0,SET_INITIAL_STATE:void 0,APPEND_INDICES:void 0,APPEND_TIMES:void 0,APPEND_MESSAGES:void 0,INCREMENT_TIME:void 0,SET_CURRENT_LINE_WITH_PERCENTAGE:void 0,SET_CURRENT_LINE_WITH_TIME:void 0,SET_CURRENT_LINE:void 0,NEXT_LINE:void 0,PREVIOUS_LINE:void 0,PAUSE:void 0,UNPAUSE:void 0,RUN:void 0,STOP:void 0,SET_TIME_MULTIPLIER:void 0}}),Ke=Object(X.b)({UI:{GCODE_PANE:{TOGGLE_PANE:void 0,SET_WIDTH:void 0,SET_SELECTED:void 0,SET_LINE_OFFSET:void 0,SET_SHOW_LINES:void 0,SCROLL:void 0,SET_TAB:void 0}}}),qe=Object(X.b)({UI:{CONTROLS_OVERLAY:{SET_VISIBLE:void 0,TOGGLE_PANE:void 0,PLAY:void 0,PREVIOUS:void 0,NEXT:void 0,HOME:void 0,SHUFFLE:void 0}}}),Je={ui:Object(U.a)({},Ke.ui,qe.ui)},Qe=Object(X.b)({IFRAME:{INITIALIZE:void 0,ROCKHOPPER:void 0,TO_ROCKHOPPER:void 0,EMBED_GCODE:void 0}}),et=Object(X.b)({VIEWER3D:{PARENT_CAMERA:void 0,SHOW_MODEL:void 0,HIDE_MODEL:void 0,LOAD_MODEL:void 0,SET_PERSPECTIVE:void 0,SET_ORTHOGRAPHIC:void 0,SHOW_DENTAL_FIXTURE:void 0,HIDE_DENTAL_FIXTURE:void 0}}),tt=Object(U.a)({},ne,$e,Je,Qe,et),nt=n(195),at=n.n(nt),it=n(69),rt=n.n(it),ot=n(58),st=n.n(ot),ct=n(196),lt=n(307),ut=n.n(lt),dt=n(313),ht=n.n(dt),mt=n(308),pt=n.n(mt),ft=n(309),gt=n.n(ft),vt=n(312),bt=n.n(vt),Mt=n(310),St=n.n(Mt),Ot=n(311),wt=n.n(Ot),Et=n(314),yt=n.n(Et),jt=n(25),xt=function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},Tt=C(),Ct=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(M.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(i)))).handleMouseMove=function(e){var t=n.props,a=t.visible,i=t.onShow,r=t.onHide,o=t.visibleTimeout;e.buttons&&!n.clickedInOverlay||(!a&&i&&i(),r&&!n.over&&(n.timeout&&window.clearTimeout(n.timeout),n.timeout=setTimeout(function(){r()},o||2e3)))},n.handleMouseOver=function(){n.over=!0,n.timeout&&(window.clearTimeout(n.timeout),n.timeout=null)},n.handleMouseOut=function(){n.over=!1;var e=n.props,t=e.onHide,a=e.visibleTimeout;t&&(n.timeout&&window.clearTimeout(n.timeout),n.timeout=setTimeout(function(){t()},a||2e3))},n.handleMouseDown=function(){n.clickedInOverlay=!0},n.handleMouseUp=function(){n.clickedInOverlay=!1},n.handlePlay=function(e){var t=n.props.onPlay;Tt.event("ControlsOverlay","clicked play").send(),t&&t(e)},n.handlePause=function(e){var t=n.props.onPause;Tt.event("ControlsOverlay","clicked pause").send(),t&&t(e)},n.handleRun=function(e){var t=n.props.onRun;Tt.event("ControlsOverlay","clicked run").send(),t&&t(e)},n.handlePrevious=function(e){var t=n.props.onPrevious;Tt.event("ControlsOverlay","clicked previous").send(),t&&t(e)},n.handleNext=function(e){var t=n.props.onNext;Tt.event("ControlsOverlay","clicked next").send(),t&&t(e)},n.handleStop=function(e){var t=n.props.onStop;Tt.event("ControlsOverlay","clicked stop").send(),t&&t(e)},n.handleTogglePane=function(e){var t=n.props,a=t.onTogglePane;t.gcodePaneVisible?Tt.event("ControlsOverlay","clicked hide gcode pane").send():Tt.event("ControlsOverlay","clicked show gcode pane").send(),a&&a(e)},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.visible,a=e.paused,i=e.running,r=e.loadedValue,o=e.value,s=e.timeMultiplierValue,c=e.currentTime,l=e.fadeTime,u=e.onSlider,d=e.onTimeSlider,h=Math.floor(c)%60,p=Math.floor(c/60)%60,f=Math.floor(c/60/60),g=xt(f,2)+":"+xt(p,2)+":"+xt(h,2),v=Math.log(s+1)/Math.log(1001);return m.a.createElement(at.a,{in:n,timeout:l||500},m.a.createElement("div",{className:t.overlay,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onMouseDown:this.handleMouseDown},m.a.createElement("div",null,m.a.createElement("div",{className:t.left},m.a.createElement(st.a,{title:"Toggle GCode Pane",enterDelay:500,placement:"top",disableFocusListener:!0},m.a.createElement(rt.a,{onClick:this.handleTogglePane},m.a.createElement(ut.a,{className:t.button})))),m.a.createElement("div",{className:t.center},m.a.createElement(st.a,{title:"Previous Line",enterDelay:500,placement:"top",disableFocusListener:!0},m.a.createElement(rt.a,{onClick:this.handlePrevious},m.a.createElement(pt.a,{className:t.button}))),i?a?m.a.createElement(st.a,{title:"Play",enterDelay:500,placement:"top",disableFocusListener:!0},m.a.createElement(rt.a,{onClick:this.handlePlay},m.a.createElement(gt.a,{className:t.button}))):m.a.createElement(st.a,{title:"Pause",enterDelay:500,placement:"top",disableFocusListener:!0},m.a.createElement(rt.a,{onClick:this.handlePause},m.a.createElement(St.a,{className:t.button}))):null,i?m.a.createElement(st.a,{title:"Stop Program",enterDelay:500,placement:"top",disableFocusListener:!0},m.a.createElement(rt.a,{onClick:this.handleStop},m.a.createElement(wt.a,{className:t.button}))):m.a.createElement(st.a,{title:"Run Program",enterDelay:500,placement:"top",disableFocusListener:!0},m.a.createElement(rt.a,{onClick:this.handleRun},m.a.createElement(bt.a,{className:t.button}))),m.a.createElement(st.a,{title:"Next Line",enterDelay:500,placement:"top",disableFocusListener:!0},m.a.createElement(rt.a,{onClick:this.handleNext},m.a.createElement(ht.a,{className:t.button})))),m.a.createElement("div",{className:t.right},m.a.createElement("div",{className:t.timeSliderContainer},m.a.createElement(ct.a,{min:0,max:1,value:v,trackValue:1,onChange:function(e,t){return d(Math.pow(1001,t)-1)}})),m.a.createElement("div",{className:t.timeIconContainer},m.a.createElement(st.a,{title:"Time Scale",enterDelay:500,placement:"top",disableFocusListener:!0},m.a.createElement(yt.a,{onClick:function(e){Tt.event("ControlsOverlay","clicked reset time scale").send(),d(1)},className:t.timeIcon})),m.a.createElement("span",{className:t.timeMultiplierLabel},s.toFixed(2))))),m.a.createElement("br",{className:t.break}),m.a.createElement("div",{className:t.sliderControls},m.a.createElement("div",{className:t.sliderTime},g),m.a.createElement("div",{className:t.sliderContainer},m.a.createElement(ct.a,{value:o,trackValue:r,onChange:function(e,t){return u(t)}})))))}}]),t}(h.Component),Lt=Object(jt.withStyles)(function(e){return{toolbar:e.mixins.toolbar,overlay:{zIndex:e.zIndex.drawer+3,position:"absolute",left:0,bottom:20,right:0,marginLeft:"auto",marginRight:"auto",width:"670px",maxWidth:"100%",textAlign:"center",verticalAlign:"middle",backgroundColor:"rgba(100,100,100,.75)",borderRadius:5,color:"white"},button:{color:"#dddddd"},left:{float:"left",width:"33.333%",textAlign:"left"},center:{float:"left",width:"33.333%",textAlign:"center"},right:{float:"left",width:"33.333%",marginBottom:0,textAlign:"right"},break:{lineHeight:0,clear:"both"},sliderTime:{float:"left",width:50,marginLeft:15,fontSize:10,lineHeight:"32px",verticalAlign:"middle"},sliderContainer:{float:"left",width:"calc(100% - 95px)",marginLeft:15,marginRight:15},timeSliderContainer:{width:"calc(100% - 100px)",float:"right",marginRight:15},timeIconContainer:{float:"right",lineHeight:"32px",cursor:"pointer"},timeIcon:{color:"#dddddd",verticalAlign:"middle"},timeMultiplierLabel:{fontSize:"10px",marginRight:5}}})(Ct),Gt=Object(g.b)(function(e,t){return{visible:e.get("ui").get("controlsOverlay").get("visible"),gcodePaneVisible:e.get("ui").get("gcodePane").get("visible"),loadedValue:e.get("interpreter").get("processingProgress"),value:e.get("interpreter").get("totalTime")>0?e.get("interpreter").get("currentTime")/e.get("interpreter").get("totalTime")*100:0,currentTime:e.get("interpreter").get("currentTime"),paused:e.get("interpreter").get("paused"),running:e.get("interpreter").get("running"),timeMultiplierValue:e.get("interpreter").get("timeMultiplier")}},function(e,t){return{onShow:function(){return e(tt.ui.controlsOverlay.setVisible(!0))},onHide:function(){return e(tt.ui.controlsOverlay.setVisible(!1))},onTogglePane:function(){return e(tt.ui.gcodePane.togglePane())},onHome:function(){return e(tt.ui.controlsOverlay.home())},onShuffle:function(){return e(tt.ui.controlsOverlay.shuffle())},onPrevious:function(){return e(tt.interpreter.previousLine())},onPlay:function(){return e(tt.interpreter.unpause())},onRun:function(){return e(tt.interpreter.run())},onStop:function(){return e(tt.interpreter.stop())},onPause:function(){return e(tt.interpreter.pause())},onNext:function(){return e(tt.interpreter.nextLine())},onSlider:function(t){return e(tt.interpreter.setCurrentLineWithPercentage(t))},onTimeSlider:function(t){return e(tt.interpreter.setTimeMultiplier(t))}}})(Lt),kt="BASE",At="B_AXIS",Pt="A_AXIS",Rt="Y_AXIS",It="TOOL",Nt=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(M.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(i)))).updateDimensions=function(){var e=n.props.hideTitleBar;n.viewer.updateDimensions(window.innerWidth,window.innerHeight-(e?0:64))},n.handleMouseMove=function(e){n.viewer.handleMouseMove(e)},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.updateDimensions),this.viewer=We.createInstance(this.canvas);!function t(){window.requestAnimationFrame(t),e.viewer.step(.01667),e.viewer.updateMachine(),e.viewer.render()}()}},{key:"componentWillUnmount",value:function(){this.viewer=null,window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.machineState,n=e.currentTime,a=e.cameraParent,i=e.showModel,r=e.showDentalFixture,o=e.cameraMode;switch(this.viewer.update(t,n),a){case kt:this.viewer.parentCameraToBase();break;case Rt:this.viewer.parentCameraToY();break;case At:this.viewer.parentCameraToB();break;case Pt:this.viewer.parentCameraToA();break;case It:this.viewer.parentCameraToTool()}switch(o){case"PERSPECTIVE":this.viewer.controls.setPerspective();break;case"ORTHOGRAPHIC":this.viewer.controls.setOrthographic()}i?this.viewer.showModel():this.viewer.hideModel(),r?this.viewer.showDentalFixture():this.viewer.hideDentalFixture()}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.hideTitleBar;return m.a.createElement("div",{className:a?"":n.container},m.a.createElement("canvas",{ref:function(t){return e.canvas=t},onMouseMove:this.handleMouseMove}),m.a.createElement(Gt,null))}}]),t}(h.Component),_t=Object(jt.withStyles)({container:{paddingTop:64,overflow:"hidden"}})(Nt),Ft=Object(g.b)(function(e,t){return{machineState:e.get("machineState"),currentTime:e.get("interpreter").get("currentTime"),currentLine:e.get("interpreter").get("currentLine"),hideTitleBar:!e.get("ui").get("titleBar").get("visible"),cameraParent:e.get("viewer3D").get("cameraParent"),showModel:e.get("viewer3D").get("showModel"),showDentalFixture:e.get("viewer3D").get("showDentalFixture"),cameraMode:e.get("viewer3D").get("cameraMode")}},function(e,t){return{}})(_t),Dt=n(149),Zt=n.n(Dt),Bt=n(317),zt=n.n(Bt),Ut=n(119),Xt=n.n(Ut),Ht=n(61),Vt=n(67),Yt=n.n(Vt),Wt=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(M.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(i)))).handleFileSelect=function(e){var t=n.props,a=t.onFileSelect,i=t.onRead;1===e.target.files.length&&(a&&a(e.target.files[0]),i&&n.readFile(e.target.files[0]),n.fileInput.value="")},n.handleFileOpen=function(e){n.fileInput.click()},n.readFile=function(e){var t=n.props,a=t.onRead,i=t.onFinished,r=t.onError,o=t.chunkSize,s=t.stopReading,c=t.binary,l=e.size,u=o||65536,d=0,h=null,m=function(e){null===e.target.error?(c?(a(e.target.result,Math.min(u,e.target.result.byteLength),l),d+=e.target.result.byteLength):(a(e.target.result,Math.min(u,e.target.result.length),l),d+=e.target.result.length),d>=l?i&&i():s&&s()?i&&i():h(d,u)):r&&r(e.target.error)};(h=function(t,n){var a=new FileReader,i=e.slice(t,n+t);a.onload=m,c?a.readAsArrayBuffer(i):a.readAsText(i)})(d,u)},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.children,i=t.color,r=t.component,o=t.disabled,s=t.disableFocusRipple,c=t.disableRipple,l=t.fullWidth,u=t.href,d=t.mini,h=t.size,p=t.variant,f=t.buttonClasses,g=t.accept;return m.a.createElement("span",null,m.a.createElement(Yt.a,{onClick:this.handleFileOpen,classes:f,component:r,color:i,disabled:o,disableFocusRipple:s,disableRipple:c,fullWidth:l,href:u,mini:d,size:h,variant:p},a),m.a.createElement("input",{onChange:this.handleFileSelect,ref:function(t){return e.fileInput=t},type:"file",accept:g,className:n.fileSelect}))}}]),t}(h.Component),$t=Object(jt.withStyles)(function(e){return{fileSelect:{display:"none"}}})(Wt),Kt=n(148),qt=n.n(Kt),Jt=C(),Qt=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(M.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(i)))).handleFileSelect=function(e){var t=n.props,a=t.onLoading,i=t.onSetFileName;n.fileSize=e.size,n.fileName=e.name,n.read=0,n.lines=[],n.buffer="",i&&i(e.name),Jt.event("GCodeLoader","GCode File Size","GCode File Size",n.fileSize).send(),n.startTime=E()(),a&&a()},n.handleFinished=function(){var e=n.props.onFinished;n.stopReadingFile=!1,e&&e(),Jt.timing("GCodeLoader","loaded gcode file",Math.round(E()()-n.startTime)).send()},n.handleRead=function(e,t){var a,i=n.props,r=i.onProgress,o=i.onLines,s=i.onError;n.read+=t;var c=Math.min(n.read/n.fileSize*100,100),l=(n.buffer+e).split("\n");n.buffer=l.pop(),(a=n.lines).push.apply(a,Object(Ht.a)(l.map(function(e){return e.replace(/\r/,"")}))),s&&n.lines.length>2e6&&(n.stopReadingFile=!0,o(n.lines),s(new Error("GCode program exceeds 2 million lines. Program truncated to "+n.lines.length+" lines."))),r&&r(c),o&&(n.read===t?o(n.lines.slice(),!0):n.read>=n.fileSize&&(o(n.lines),Jt.event("GCodeLoader","Lines In GCode Program","Lines In GCode Program",n.lines.length).send()))},n.stopReading=function(){return n.stopReadingFile},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return m.a.createElement($t,{onFileSelect:this.handleFileSelect,onFinished:this.handleFinished,onRead:this.handleRead,stopReading:this.stopReading,chunkSize:65536,size:"small",accept:".ngc, .nc",color:"inherit"},m.a.createElement(qt.a,null)," GCode")}}]),t}(h.Component),en=Object(g.b)(function(e,t){return{machineState:e.get("machineState")}},function(e,t){return{onSetFileName:function(t){return e($e.interpreter.setFileName(t))},onLoading:function(){return e($e.interpreter.startLoading())},onFinished:function(){return e($e.interpreter.endLoading())},onProgress:function(t){return e($e.interpreter.setLoadingProgress(t))},onLines:function(t,n){return e($e.interpreter.setLines(t,n))}}})(Qt),tn=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(M.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(i)))).handleFileSelect=function(e){var t=n.props,a=t.binary,i=t.onLoading;n.fileSize=e.size,n.fileName=e.name,a?(n.read=0,n.buffer=""):(n.data=void 0,n.buffer=void 0,n.offset=0),i&&i()},n.handleFinished=function(){var e=n.props.onLoadModel;n.stopReadingFile=!1,e(n.buffer,n.fileName)},n.handleRead=function(e,t,a){var i=n.props,r=i.onProgress,o=i.onError;n.data||(n.buffer=new ArrayBuffer(a),n.data=new Uint8Array(n.buffer),n.offset=0);try{n.data.set(new Uint8Array(e),n.offset)}catch(c){o&&o(new Error("Error reading data chunk: "+c.message+", "+n.offset))}n.offset+=t;var s=Math.min(n.offset/n.fileSize*100,100);r&&r(s)},n.stopReading=function(){return n.stopReadingFile},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.iconOnly,n=e.variant,a=e.size,i=e.color;return m.a.createElement($t,{onFileSelect:this.handleFileSelect,onFinished:this.handleFinished,onRead:this.handleRead,stopReading:this.stopReading,chunkSize:65536,binary:!0,size:a,color:i,accept:".obj,.stl",variant:n},m.a.createElement(qt.a,null),t?null:" Model")}}]),t}(h.Component),nn=C(),an=Object(g.b)(function(e,t){return{}},function(e,t){return{onLoadModel:function(t,n){var a=We.getInstance();if(n.endsWith(".obj"))if(a){var i=E()(),r=new TextDecoder("utf-8");a.loadObjModel(r.decode(t));var o=E()();nn.timing("ModelLoader","load obj",Math.round(o-i)).send(),nn.event("ModelLoader","OBJ File Size","OBJ File Size",t.byteLength).send()}else console.error("viewer not loaded yet");else if(n.endsWith(".stl"))if(a){var s=E()();a.loadSTLModel(t);var c=E()();nn.timing("ModelLoader","load stl",Math.round(c-s)).send(),nn.event("ModelLoader","STL File Size","STL File Size",t.byteLength).send()}else console.error("viewer not loaded yet");e(tt.viewer3D.loadModel()),e(tt.viewer3D.showModel())}}})(tn),rn=n(315),on=n.n(rn);var sn=function(e){var t=e.value,n=e.thickness;if(e.loading){var a=t.toFixed(2)+"%";return m.a.createElement(st.a,{title:a},m.a.createElement(on.a,{variant:"determinate",color:"inherit",value:t,thickness:n}))}return null},cn=Object(g.b)(function(e,t){var n=0,a=3.6,i=!1;return e.get("interpreter").get("loading")?(n=e.get("interpreter").get("loadingProgress"),a=1,i=!0):e.get("interpreter").get("processing")&&(n=e.get("interpreter").get("processingProgress"),a=3.6,i=!0),{value:n,thickness:a,loading:i}},function(e,t){return{}})(sn),ln=n(316),un=n.n(ln),dn=C(),hn=Object(jt.withStyles)(function(e){return{appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#333333"},title:{flex:1,color:"white",textDecoration:"none"},logo:{height:32,marginRight:10}}})(function(e){var t=e.classes;return m.a.createElement(Zt.a,{className:t.appBar},m.a.createElement(zt.a,null,m.a.createElement("a",{href:"https://www.pocketnc.com",target:"_blank",rel:"noopener noreferrer"},m.a.createElement("img",{src:un.a,alt:"Pocket NC",className:t.logo,onClick:function(){return dn.event("TitleBar","clicked link to pocketnc.com").send()}})),m.a.createElement(Xt.a,{className:t.title},m.a.createElement("a",{href:"https://www.pocketnc.com",className:t.title,target:"_blank",rel:"noopener noreferrer",onClick:function(){return dn.event("TitleBar","clicked link to pocketnc.com").send()}},"Pocket NC Simulator")),m.a.createElement(cn,null),m.a.createElement(en,{onError:function(e){return console.error(e)}}),m.a.createElement(an,{size:"small",color:"inherit",onError:function(e){return console.error(e)}})))}),mn=n(325),pn=n.n(mn),fn=n(326),gn=n.n(fn),vn=n(199),bn=n.n(vn),Mn=n(11),Sn=n.n(Mn),On=n(318),wn=(n(658),n(659),n(660),n(121)),En=n.n(wn),yn=n(319),jn=n.n(yn),xn=(n(661),C()),Tn=function(){var e=document.getElementsByClassName("ace_tooltip");if(e.length>0)for(var t=0;t<e.length;t++)document.body.appendChild(e[t])},Cn=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(M.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(i)))).handleClick=function(e){var t=n.props.onSetCurrentLine,a=e.editor,i=a.getCursorPosition();a.getSelection().isEmpty()&&t(i.row)},n.handleChange=function(e){xn.event("Editor",e.action,e.action,e.lines.length).send()},n.handleDownload=function(){var e=n.props.fileName,t=n.editor.getValue(),a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.click()},n.handleFileNameChange=function(e){(0,n.props.onSetFileName)(e.target.value)},n.handleRef=function(e){n.container=e},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.gcode,a=t.annotations;this.editor=On.edit(this.container),this.editor.getSession().setMode("ace/mode/gcode"),this.editor.setTheme("ace/theme/chrome"),this.editor.$blockScrolling=1/0,this.editor.setShowPrintMargin(!1),this.editor.setOptions({readOnly:!0}),this.editor.session.on("changeScrollLeft",function(t){0!==t&&e.editor.session.setScrollLeft(0)});var i=this.editor.getSelection(),r=this.editor.getSession();i.on("changeCursor",function(e,t,n){}),i.on("changeSelection",function(e,t,n){});var o=r.getDocument();o.setValue(""),o.insertFullLines(0,n),r.setAnnotations(a.toJS()),o.on("change",this.handleChange),this.editor.on("guttermousemove",Tn),this.editor.on("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){this.editor=null}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.gcode,a=t.annotations,i=t.currentLine,r=t.currentTab,o=t.running,s=t.fileName,c=e.gcode,l=e.annotations,u=e.currentLine,d=e.currentTab,h=e.running;return s!==e.fileName||h!==o||d!==r||c!==n||i!==u||a!==l}},{key:"componentDidUpdate",value:function(e){var t=e.gcode,n=e.annotations,a=e.running,i=this.props,r=i.gcode,o=i.annotations,s=i.currentLine,c=i.running,l=i.setLines,u=this.editor.getSession(),d=u.getDocument();if(!a&&c&&r===t){for(var h=1;!u.getLine(u.getLength()-h);)h++;l(u.getLines(0,u.getLength()-h))}c?(this.editor.container.style.backgroundColor="#f3f3f3",this.editor.setOptions({readOnly:!0})):(this.editor.container.style.backgroundColor="#ffffff",this.editor.setOptions({readOnly:!1})),t!==r&&(d.off("change",this.handleChange),d.setValue(""),d.insertFullLines(0,r),d.on("change",this.handleChange)),n!==o&&u.setAnnotations(o.toJS()),this.editor.gotoLine(s+1,1/0),this.editor.resize()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.fileName,a=e.running;return m.a.createElement("div",{className:t.mainDiv},m.a.createElement("div",{ref:this.handleRef,className:t.container}),m.a.createElement("div",{className:t.gcodeTitleBar},m.a.createElement(En.a,{disabled:a,value:n,onChange:this.handleFileNameChange,style:{width:"calc(100% - 70px)"}})," ",m.a.createElement(Yt.a,{size:"small",onClick:this.handleDownload},m.a.createElement(jn.a,null))))}}]),t}(h.Component),Ln=Object(jt.withStyles)(function(e){return{mainDiv:{width:"100%",height:"100%"},container:{width:"100%",height:"calc(100% - 39px)"},gcodeTitleBar:{width:"100%",fontSize:"15px",borderTop:"1px solid #dddddd",color:"gray",paddingLeft:"5px"}}})(Cn),Gn=n(122),kn=n(150),An=n.n(kn),Pn=n(52),Rn=n.n(Pn),In=n(54),Nn=n.n(In),_n=n(55),Fn=n.n(_n),Dn=n(322),Zn=n.n(Dn),Bn=n(323),zn=n.n(Bn),Un=n(324),Xn=n.n(Un),Hn=n(123),Vn=n(198),Yn=n.n(Vn);function Wn(){var e=Object(Gn.a)(["\n  && {\n    color: #ff0000;\n    width: 15px;\n  }"]);return Wn=function(){return e},e}function $n(){var e=Object(Gn.a)(["\n  && {\n    color: #d4ba62;\n    width: 15px;\n  }"]);return $n=function(){return e},e}function Kn(){var e=Object(Gn.a)(["\n  && {\n    color: #3f51b5;\n    width: 15px;\n  }"]);return Kn=function(){return e},e}function qn(){var e=Object(Gn.a)(["\n  && {\n    padding-left: 8px\n  }\n"]);return qn=function(){return e},e}var Jn=Hn.a.div(qn()),Qn=Object(Hn.a)(Zn.a)(Kn()),ea=Object(Hn.a)(zn.a)($n()),ta=Object(Hn.a)(Xn.a)(Wn()),na=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(M.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(i)))).handleSetToolLengthOffset=function(e,t){return function(a){var i=n.props.onSetTool;if("Enter"===a.key||"blur"===a.type){var r=parseFloat(a.target.value);if(isNaN(r))a.target.value=t;else a.target.value=r,i({P:e,Z:r});a.target.blur(),a.preventDefault()}}},n.handleSetToolDiameter=function(e,t){return function(a){var i=n.props.onSetTool;if("Enter"===a.key||"blur"===a.type){var r=parseFloat(a.target.value);if(isNaN(r))a.target.value=t;else a.target.value=r,i({P:e,R:.5*r});a.target.blur(),a.preventDefault()}}},n.handleSetToolHolder=function(e){return function(t){(0,n.props.onSetTool)({P:e,holder:t.target.value})}},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.numLines,n=e.approximateTime,a=e.maxLimitMessage,i=e.minLimitMessage,r=e.unimplementedMessages,o=e.nonSummarizedWarnings,s=e.nonSummarizedErrors,c=e.toolLengthOffsetMessages,l=e.running,u=e.classes,d=e.toolTable,h=[];for(var p in a){var f=a[p],g=p+" positive limit exceeded by maximum of "+f.amount.toFixed(4)+" on line "+(f.line+1)+".";"Z"===p&&(g+=" Try shortening your tool by at least "+f.amount.toFixed(4)+" inches."),h.push(m.a.createElement(Rn.a,{key:p+"maxlimit",className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(ta,null)),m.a.createElement(Fn.a,null,g)))}for(var v in i){var b=i[v],M=v+" negative limit exceeded by maximum of "+b.amount.toFixed(4)+" on line "+(b.line+1)+".";"Z"===v&&(M+=" Try extending your tool by at least "+b.amount.toFixed(4)+" inches."),h.push(m.a.createElement(Rn.a,{key:v+"minlimit",className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(ta,null)),m.a.createElement(Fn.a,null,M)))}var S=Math.floor(n/60/60),O=Math.floor(n/60)%60,w=Math.floor(n)%60,E=[];S>0&&E.push(S+" hour"+(1!==S?"s":"")),O>0&&E.push(O+" minute"+(1!==O?"s":"")),w>0&&E.push(w+" second"+(1!==w?"s":""));var y=null;if(r.count()>0){var j={};r.forEach(function(e){j[e.code]=e.description});var x=[];for(var T in j)x.push(m.a.createElement(Rn.a,{key:T,className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(ea,null)),m.a.createElement(Fn.a,null,T,"'s intended usage: ",j[T])));y=[m.a.createElement(Rn.a,{key:"unimplementedText",className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(ea,null)),m.a.createElement(Fn.a,null,"Found ",x.length," code",1!==x.length?"s":""," on ",r.count()," line",1!==r.count()?"s":""," that ",1!==x.length?"aren't":"isn't"," implemented in the simulator. A real Pocket NC's behavior may differ from what is shown. Check the intended usage of each code below.")),m.a.createElement(Jn,{key:"unimplementedCodes"},m.a.createElement(An.a,{dense:!0,disablePadding:!0,className:u.nested},x))]}var C=o.map(function(e,t){return m.a.createElement(Rn.a,{key:e.message+t,className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(ea,null)),m.a.createElement(Fn.a,null,"undefined"!==typeof e.line?"Warning on line "+(e.line+1)+": ":"",e.message))}),L=s.map(function(e,t){return m.a.createElement(Rn.a,{key:e.message+t,className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(ta,null)),m.a.createElement(Fn.a,null,"undefined"!==typeof e.line?"Error on line "+(e.line+1)+": ":"",e.message))}),G=[];if(c.count()>0){var k={};for(var A in c.forEach(function(e){k[e.toolNumber]={toolLengthOffset:e.toolLengthOffset,toolDiameter:e.toolDiameter,toolHolder:e.toolHolder}}),k)G.push(m.a.createElement(Rn.a,{key:"usingTool"+A,className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(Qn,null)),m.a.createElement(Fn.a,null,"Using tool ",A))),G.push(m.a.createElement(Rn.a,{key:"toolLengthOffset"+A,className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(Qn,null)),m.a.createElement(Fn.a,null,"Tool ",A," Z offset ",m.a.createElement(En.a,{disabled:l,onBlur:this.handleSetToolLengthOffset(A,k[A].toolLengthOffset),onKeyPress:this.handleSetToolLengthOffset(A,k[A].toolLengthOffset),defaultValue:k[A].toolLengthOffset.toFixed(4)}),"."))),G.push(m.a.createElement(Rn.a,{key:"toolDiameter"+A,className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(Qn,null)),m.a.createElement(Fn.a,null,"Tool ",A," Diameter ",m.a.createElement(En.a,{disabled:l,onBlur:this.handleSetToolDiameter(A,k[A].toolDiameter),onKeyPress:this.handleSetToolDiameter(A,k[A].toolDiameter),defaultValue:k[A].toolDiameter.toFixed(4)}),"."))),G.push(m.a.createElement(Rn.a,{key:"toolHolder"+A,className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(Qn,null)),m.a.createElement(Fn.a,null,"Tool ",A," Holder",m.a.createElement(Yn.a,{disabled:l,checked:d.get(parseInt(A)-1).get("holder")===He,value:He,name:"toolHolder"+A,"aria-label":"Short Tool Holder",onChange:this.handleSetToolHolder(A),color:"primary"})," Short",m.a.createElement(Yn.a,{disabled:l,checked:d.get(parseInt(A)-1).get("holder")===Xe,value:Xe,name:"toolHolder"+A,"aria-label":"Long Tool Holder",onChange:this.handleSetToolHolder(A),color:"primary"})," Long")))}return m.a.createElement("div",{className:u.container},m.a.createElement(An.a,{dense:!0},[],h,L,C,y,m.a.createElement(Rn.a,{className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(Qn,{fontSize:"inherit",color:"primary"})),m.a.createElement(Fn.a,null,t," lines")),m.a.createElement(Rn.a,{className:u.li},m.a.createElement(Nn.a,{className:u.liIcon},m.a.createElement(Qn,{fontSize:"inherit",color:"primary"})),m.a.createElement(Fn.a,null,"Approximately ",E.join(" ")," to run.")),G))}}]),t}(h.Component),aa=Object(jt.withStyles)(function(e){return{container:{height:"100%",overflow:"scroll",marginLeft:10},nested:{paddingLeft:e.spacing.unit},li:{paddingLeft:"8px",paddingRight:"8px"},liIcon:{marginRight:0}}})(na),ia=n(77),ra=function(e){return e.get("interpreter").get("messages")},oa=Object(ia.createSelector)([ra],function(e){return e.filter(function(e){return"undefined"!==typeof e.line}).map(function(e){return{row:e.line,column:0,text:e.message,type:e.severity}})}),sa=Object(ia.createSelector)([ra],function(e){var t=e.filter(function(e){return e.type===ve}),n={};t.forEach(function(e){n[e.axis]||(n[e.axis]=[]),n[e.axis].push(e)});var a={};for(var i in n)a[i]=n[i].reduce(function(e,t){return t.amount>e.amount?t:e},{amount:0});return a}),ca=Object(ia.createSelector)([ra],function(e){var t=e.filter(function(e){return e.type===ge}),n={};t.forEach(function(e){n[e.axis]||(n[e.axis]=[]),n[e.axis].push(e)});var a={};for(var i in n)a[i]=n[i].reduce(function(e,t){return t.amount>e.amount?t:e},{amount:0});return a}),la=Object(ia.createSelector)([ra],function(e){return e.filter(function(e){return e.type===pe})}),ua=Object(ia.createSelector)([ra],function(e){return e.filter(function(e){return e.severity===de&&-1===[ve,ge].indexOf(e.type)})}),da=Object(ia.createSelector)([ra],function(e){return e.filter(function(e){return e.severity===he&&-1===[pe].indexOf(e.type)})}),ha=Object(ia.createSelector)([ra],function(e){return e.filter(function(e){return e.type===Oe})}),ma=o,pa=function(e){return e.get("interpreter")},fa=function(e){return e.get("machineState")},ga=function(e){return e.get("interpreter").get("lines")},va=function(e){return e.get("interpreter").get("linesPerIndex")},ba=function(e){return e.get("interpreter").get("times").last()},Ma=function(e){var t=e.get("tool"),n=t.get("table"),a=t.get("loaded");return a>0?n.get(a-1):z.a.Map({Z:-6,R:0})},Sa=Object(g.b)(function(e,t){return{numLines:e.get("interpreter").get("lines").length,approximateTime:e.get("interpreter").get("times").last(),maxLimitMessage:ma.maxLimitMessage(e),minLimitMessage:ma.minLimitMessage(e),unimplementedMessages:ma.unimplementedMessages(e),nonSummarizedWarnings:ma.nonSummarizedWarnings(e),nonSummarizedErrors:ma.nonSummarizedErrors(e),toolLengthOffsetMessages:ma.setToolLengthOffsetMessages(e),running:e.get("interpreter").get("running"),toolTable:e.get("machineState").get("tool").get("table")}},function(e,t){return{onSetTool:function(t){return e(tt.machineState.tool.table.setTool(t))}}})(aa),Oa=C();var wa=Object(jt.withStyles)(function(e){return{summary:{padding:"10px"},hidden:{display:"none"},toolbar:e.mixins.toolbar,tabNoTitleBar:{height:"100%",width:"100%"},tab:{height:"calc(100% - 112px)",width:"100%"},paper:{}}})(function(e){var t=e.classes,n=e.width,a=e.visible,i=e.currentLine,r=e.annotations,o=e.onScroll,s=e.onTabChange,c=e.onSetCurrentLine,l=e.currentTab,u=e.running,d=e.gcode,h=e.setLines,p=e.hideTitleBar,f=e.fileName,g=e.onSetFileName;return m.a.createElement(pn.a,{variant:"persistent",open:a,PaperProps:{style:{width:n,height:"100vh"}},classes:{paper:t.paper}},p?null:m.a.createElement("div",{className:t.toolbar}),m.a.createElement(Zt.a,{position:"static",color:"default"},m.a.createElement(gn.a,{value:l,onChange:s,indicatorColor:"primary",textColor:"primary",fullWidth:!0},m.a.createElement(bn.a,{label:"GCode",onClick:function(){return Oa.event("GCodePane","clicked gcode tab").send()}}),m.a.createElement(bn.a,{label:"Summary",onClick:function(){return Oa.event("GCodePane","clicked summary tab").send()}}))),m.a.createElement("div",{className:Sn()(p?t.tabNoTitleBar:t.tab,Object(F.a)({},t.hidden,0!==l))},m.a.createElement(Ln,{gcode:d,annotations:r,currentLine:i,onScroll:o,currentTab:l,running:u,setLines:h,fileName:f,onSetCurrentLine:c,onSetFileName:g})),m.a.createElement("div",{className:Sn()(t.tab,Object(F.a)({},t.hidden,1!==l))},m.a.createElement(Sa,null)))}),Ea=Object(g.b)(function(e,t){var n=e.get("ui").get("gcodePane"),a=e.get("interpreter").get("lines");return{width:n.get("width"),visible:n.get("visible"),annotations:ma.annotations(e),currentLine:e.get("interpreter").get("currentLine"),gcode:a,currentTab:n.get("currentTab"),running:e.get("interpreter").get("running"),hideTitleBar:!e.get("ui").get("titleBar").get("visible"),fileName:e.get("interpreter").get("fileName")}},function(e,t){return{onScroll:function(t){return e(tt.ui.gcodePane.scroll(t))},onTabChange:function(t,n){return e(tt.ui.gcodePane.setTab(n))},setLines:function(t){return e(tt.interpreter.setLines(t))},onSetCurrentLine:function(t){return e(tt.interpreter.setCurrentLine(t))},onSetFileName:function(t){return e(tt.interpreter.setFileName(t))}}})(wa),ya=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(M.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(i)))).handleMouseUp=function(e){n.dragging=!1},n.handleMouseDown=function(e){e.preventDefault(),n.dragging=!0},n.handleMouseMove=function(e){var t=n.props.onDrag;n.dragging&&t&&(e.preventDefault(),t(Math.min(Math.max(e.pageX,0),window.innerWidth)))},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.left,a=e.width;return m.a.createElement("div",{className:t.divider,style:{left:n-.5*a,width:a},onMouseDown:this.handleMouseDown})}}]),t}(h.Component),ja=Object(jt.withStyles)(function(e){return{divider:{position:"absolute",height:"100%",zIndex:e.zIndex.drawer+1,cursor:"col-resize"}}})(ya),xa=Object(g.b)(function(e,t){return{left:e.get("ui").get("gcodePane").get("width")}},function(e,t){return{onDrag:function(t){return e(Je.ui.gcodePane.setWidth(t))}}})(ja),Ta=n(328),Ca=n.n(Ta),La=n(327),Ga=n.n(La),ka=n(200),Aa=n.n(ka),Pa=n(78),Ra=n.n(Pa),Ia=C(),Na=function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(M.a)(this,Object(S.a)(t).call(this))).handleClickOutOfMenu=function(){e.setState({parentMenuOpen:!1,perspectiveMenuOpen:!1})},e.handleMouseOver=function(){e.setState({active:!0})},e.handleMouseOut=function(){e.setState({active:!1})},e.toggleParentMenu=function(t){var n;e.setState((n=t.currentTarget,function(e){return{parentMenuOpen:!e.parentMenuOpen,parentAnchorEl:n}}))},e.togglePerspectiveMenu=function(t){var n;e.setState((n=t.currentTarget,function(e){return{perspectiveMenuOpen:!e.perspectiveMenuOpen,perspectiveAnchorEl:n}}))},e.handlePerspective=function(){var t=e.props.setPerspective;e.setState({perspectiveMenuOpen:!1}),Ia.event("CameraButtons","set perspective").send(),t()},e.handleOrthographic=function(){var t=e.props.setOrthographic;e.setState({perspectiveMenuOpen:!1}),Ia.event("CameraButtons","set orthographic").send(),t()},e.handleParentCamera=function(t){var n=e.props.parentCamera;Ia.event("CameraButtons","parent camera to "+t).send(),n(t),e.setState({parentMenuOpen:!1})},e.state={parentMenuOpen:!1,perspectiveMenuOpen:!1,active:!1,parentAnchorEl:null,perspectiveAnchorEl:null},e}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.hideTitleBar,i=this.state,r=i.parentMenuOpen,o=i.perspectiveMenuOpen,s=i.active,c=i.parentAnchorEl,l=i.perspectiveAnchorEl;return m.a.createElement("div",{className:a?n.cameraButtonsNoTitleBar:n.cameraButtons},m.a.createElement(Yt.a,{variant:"fab",className:Sn()(n.button,Object(F.a)({},n.active,s)),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.toggleParentMenu},m.a.createElement(Ga.a,null)),m.a.createElement("br",null),m.a.createElement(Yt.a,{variant:"fab",className:Sn()(n.button,n.marginTop,Object(F.a)({},n.active,s)),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.togglePerspectiveMenu},m.a.createElement(Ca.a,null)),m.a.createElement("br",null),m.a.createElement(Aa.a,{open:r,anchorEl:c,onClose:this.handleClickOutOfMenu},m.a.createElement(Ra.a,{onClick:function(){return e.handleParentCamera(kt)}},"Base"),m.a.createElement(Ra.a,{onClick:function(){return e.handleParentCamera(Rt)}},"Y"),m.a.createElement(Ra.a,{onClick:function(){return e.handleParentCamera(Pt)}},"A"),m.a.createElement(Ra.a,{onClick:function(){return e.handleParentCamera(At)}},"B"),m.a.createElement(Ra.a,{onClick:function(){return e.handleParentCamera(It)}},"Tool")),m.a.createElement(Aa.a,{open:o,anchorEl:l,onClose:this.handleClickOutOfMenu},m.a.createElement(Ra.a,{onClick:function(){return e.handlePerspective()}},"Perspective"),m.a.createElement(Ra.a,{onClick:function(){return e.handleOrthographic()}},"Orthographic")))}}]),t}(h.Component),_a=Object(jt.withStyles)(function(e){return{button:{width:"30px",height:"30px",minHeight:"30px",opacity:.25,transition:"opacity .5s"},extendedButton:{width:"110px",height:"30px",minHeight:"30px",opacity:.25,transition:"opacity .5s",textTransform:"none"},marginLeft:{marginLeft:"10px"},active:{opacity:1},marginTop:{marginTop:"5px"},cameraButtonsNoTitleBar:{position:"absolute",right:"20px",top:"20px",textAlign:"right"},cameraButtons:{position:"absolute",right:"20px",top:"85px",textAlign:"right"}}})(Na),Fa=Object(g.b)(function(e,t){return{hideTitleBar:!e.get("ui").get("titleBar").get("visible")}},function(e,t){return{parentCamera:function(t){return e(tt.viewer3D.parentCamera(t))},setPerspective:function(){return e(tt.viewer3D.setPerspective())},setOrthographic:function(){return e(tt.viewer3D.setOrthographic())}}})(_a),Da=n(329),Za=n.n(Da),Ba=n(330),za=n.n(Ba),Ua=Object(jt.withStyles)(function(e){return{droNoTitleBar:{borderRadius:10,padding:"10px",backgroundColor:"rgba(100,100,100,.75)",color:"white",marginTop:10,textAlign:"right"},dro:{borderRadius:10,padding:"10px",backgroundColor:"rgba(100,100,100,.75)",color:"white",marginTop:10,textAlign:"right"},pre:{padding:0,margin:0}}})(function(e){var t=e.classes,n=e.hideTitleBar,a=e.X,i=e.Y,r=e.Z,o=e.A,s=e.B;return m.a.createElement("div",{className:n?t.droNoTitleBar:t.dro},m.a.createElement("pre",{className:t.pre},"X: ",a,m.a.createElement("br",null),"Y: ",i,m.a.createElement("br",null),"Z: ",r,m.a.createElement("br",null),"A: ",o,m.a.createElement("br",null),"B: ",s))}),Xa=Object(g.b)(function(e,t){var n=e.get("machineState").get("motion").get("position");return{hideTitleBar:!e.get("ui").get("titleBar").get("visible"),X:n.get("X").toFixed(4).padStart(8," "),Y:n.get("Y").toFixed(4).padStart(8," "),Z:n.get("Z").toFixed(4).padStart(8," "),A:n.get("A").toFixed(4).padStart(8," "),B:n.get("B").toFixed(4).padStart(8," ")}},function(e,t){return{}})(Ua),Ha=function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(M.a)(this,Object(S.a)(t).call(this))).handleMouseOver=function(){e.setState({active:!0})},e.handleMouseOut=function(){e.setState({active:!1})},e.handleToggleModel=function(){var t=e.props,n=t.modelShown,a=t.showModel,i=t.hideModel;n?i():a()},e.state={active:!1},e}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.hideTitleBar,a=e.modelShown,i=e.modelLoaded,r=this.state.active;return m.a.createElement("div",{className:n?t.otherButtonsNoTitleBar:t.otherButtons},i?m.a.createElement(Yt.a,{variant:"extendedFab",className:Sn()(t.extendedButton,t.marginTop,Object(F.a)({},t.active,r)),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleToggleModel},"Model ",a?m.a.createElement(Za.a,{className:t.marginLeft}):m.a.createElement(za.a,{className:t.marginLeft})):null,m.a.createElement(Xa,null))}}]),t}(h.Component),Va=Object(jt.withStyles)(function(e){return{button:{width:"30px",height:"30px",minHeight:"30px",opacity:.25,transition:"opacity .5s"},extendedButton:{width:"110px",height:"30px",minHeight:"30px",opacity:.25,transition:"opacity .5s",textTransform:"none"},marginLeft:{marginLeft:"10px"},active:{opacity:1},marginTop:{marginTop:"5px"},otherButtonsNoTitleBar:{position:"absolute",right:"20px",top:"180px",textAlign:"right"},otherButtons:{position:"absolute",right:"20px",top:"160px",textAlign:"right"}}})(Ha),Ya=Object(g.b)(function(e,t){return{hideTitleBar:!e.get("ui").get("titleBar").get("visible"),modelShown:e.get("viewer3D").get("showModel"),modelLoaded:e.get("viewer3D").get("modelLoaded")}},function(e,t){return{showModel:function(){return e(tt.viewer3D.showModel())},hideModel:function(){return e(tt.viewer3D.hideModel())}}})(Va),Wa=Object(jt.createMuiTheme)({typography:{useNextVariants:!0}}),$a=Object(jt.withStyles)(function(e){return{container:{position:"relative",width:"100vw",height:"100vh",overflow:"hidden"},topSpacing:{marginTop:"10px"}}})(function(e){var t=e.classes,n=e.hideTitleBar;return m.a.createElement(jt.MuiThemeProvider,{theme:Wa},m.a.createElement("div",{className:t.container},n?null:m.a.createElement(hn,null),m.a.createElement(Ea,null),m.a.createElement(Fa,null),m.a.createElement(Ya,null),m.a.createElement(xa,{width:5}),m.a.createElement(Ft,null)))}),Ka=Object(g.b)(function(e,t){return{hideTitleBar:!e.get("ui").get("titleBar").get("visible")}},function(e,t){return{showDentalFixture:function(){return e(tt.viewer3D.showDentalFixture())},parentCamera:function(t){return e(tt.viewer3D.parentCamera(t))}}})($a),qa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ja(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Qa,ei,ti,ni,ai,ii,ri,oi,si,ci,li=function(){function e(){Object(v.a)(this,e),this.windows=[]}return Object(b.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(b.a)(e,[{key:"addWindow",value:function(e,t){console.log("added window",t),this.windows.push({window:e,origin:t}),e.postMessage({type:"IFRAME/INITIALIZE"},t)}},{key:"sendMessage",value:function(e){this.windows.forEach(function(t){var n=t.window,a=t.origin;console.log("sending message to window with origin",a),n.postMessage(e,a)})}}]),e}(),ui=n(75),di=n(333),hi=n(95),mi=n(151),pi="OFF",fi="RAPID",gi="LINEAR",vi="ARC_CW",bi="ARC_CCW",Mi="XY",Si="ZX",Oi="YZ",wi="UV",Ei="WU",yi="VW",ji="ABSOLUTE",xi="INCREMENTAL",Ti="ABSOLUTE_ARC",Ci="INCREMENTAL_ARC",Li="INVERSE_TIME",Gi="UNITS_PER_MINUTE",ki="UNITS_PER_REVOLUTION",Ai="IN",Pi="MM",Ri="OFF",Ii=1e-6,Ni=function(e,t,n,a,i){i||(i=1);var r,o,s,c,l,u=e.get("X"),d=e.get("Y"),h=e.get("Z"),m=t.get("I"),p=t.get("J"),f=t.get("K"),g=t.get("X"),v=t.get("Y"),b=t.get("Z");switch(n){case Mi:r=u-m,o=d-p,s=g-m,c=v-p,l=b-h;break;case Si:r=h-f,o=u-m,s=b-f,c=g-m,l=v-d;break;case Oi:r=h-f,o=d-p,s=b-f,c=v-p,l=g-u}var M=Math.sqrt(r*r+o*o),S=1/M;r*=S,o*=S;var O=1/Math.sqrt(s*s+c*c);s*=O,c*=O;var w=Math.atan2(o,r);w<0&&(w+=2*Math.PI);var E,y=Math.atan2(c,s);y<0&&(y+=2*Math.PI),a===vi?(E=y-w)>Ii?E=-(2*Math.PI-E):E<Ii&&E>-Ii&&(E-=2*Math.PI*i):(E=y-w)<-Ii?E=2*Math.PI+E:E>-Ii&&E<Ii&&(E+=2*Math.PI*i);var j=l,x=E*M;return Math.sqrt(j*j+x*x)},_i=function(e,t,n,a,i,r){switch(e){case fi:case gi:return function(e,t,n){return z.a.Map({X:e.get("X")*(1-n)+t.get("X")*n,Y:e.get("Y")*(1-n)+t.get("Y")*n,Z:e.get("Z")*(1-n)+t.get("Z")*n,A:e.get("A")*(1-n)+t.get("A")*n,B:e.get("B")*(1-n)+t.get("B")*n,C:e.get("C")*(1-n)+t.get("C")*n})}(t,n,a);case pi:return n;case vi:case bi:return function(e,t,n,a,i,r){r||(r=1);var o,s,c,l,u=e.get("X"),d=e.get("Y"),h=e.get("Z"),m=t.get("I"),p=t.get("J"),f=t.get("K"),g=t.get("X"),v=t.get("Y"),b=t.get("Z");switch(a){case Mi:o=u-m,s=d-p,c=g-m,l=v-p;break;case Si:o=h-f,s=u-m,c=b-f,l=g-m;break;case Oi:o=h-f,s=d-p,c=b-f,l=v-p}var M=1/Math.sqrt(o*o+s*s);o*=M,s*=M;var S=1/Math.sqrt(o*o+s*s);c*=S,l*=S;var O=Math.atan2(s,o);O<0&&(O+=2*Math.PI);var w,E=Math.atan2(l,c);E<0&&(E+=2*Math.PI),i===vi?(w=E-O)>Ii?w=-(2*Math.PI-w):w<Ii&&w>-Ii&&(w-=2*Math.PI*r):(w=E-O)<-Ii?w=2*Math.PI+w:w>-Ii&&w<Ii&&(w+=2*Math.PI*r),w*=n;var y,j,x,T=Math.cos(w),C=Math.sin(w);switch(a){case Mi:y=m+(u-m)*T-(d-p)*C,j=p+(u-m)*C+(d-p)*T,x=h*(1-n)+b*n;break;case Si:y=m+(u-m)*T+(h-f)*C,j=d*(1-n)+v*n,x=f+(u-m)*C+(h-f)*T;break;case Oi:y=u*(1-n)+g*n,j=p+(d-p)*T-(h-f)*C,x=f+(d-p)*C+(h-f)*T}var L=e.get("A")*(1-n)+t.get("A")*n,G=e.get("B")*(1-n)+t.get("B")*n;return z.a.Map({X:y,Y:j,Z:x,A:L,B:G})}(t,n,a,i,e,r);default:return console.error(e," motion mode not implemented, jumping to final position."),n}},Fi=Object(X.c)((Qa={},Object(F.a)(Qa,V.machineState.feedRateMode.setInverseTime,function(){return Li}),Object(F.a)(Qa,V.machineState.feedRateMode.setUnitsPerMinute,function(){return Gi}),Object(F.a)(Qa,V.machineState.feedRateMode.setUnitsPerRevolution,function(){return ki}),Qa),Gi),Di=Object(X.c)(Object(F.a)({},Y.machineState.feedRate.set,function(e,t){return t.payload}),0),Zi=Object(X.c)((ei={},Object(F.a)(ei,J.machineState.planeSelect.setXY,function(){return Mi}),Object(F.a)(ei,J.machineState.planeSelect.setZX,function(){return Si}),Object(F.a)(ei,J.machineState.planeSelect.setYZ,function(){return Oi}),Object(F.a)(ei,J.machineState.planeSelect.setUV,function(){return wi}),Object(F.a)(ei,J.machineState.planeSelect.setWU,function(){return Ei}),Object(F.a)(ei,J.machineState.planeSelect.setVW,function(){return yi}),ei),Mi),Bi=Object(X.c)((ti={},Object(F.a)(ti,W.machineState.units.setIn,function(){return Ai}),Object(F.a)(ti,W.machineState.units.setMm,function(){return Pi}),ti),Ai),zi=z.a.Map({Z:0,R:0,holder:Ve}),Ui=Object(X.c)((ni={},Object(F.a)(ni,te.machineState.tool.set,function(e,t){return e.set("set",t.payload)}),Object(F.a)(ni,te.machineState.tool.change,function(e,t){return e.set("loaded",e.get("set"))}),Object(F.a)(ni,te.machineState.tool.setToolLengthOffset,function(e,t){var n=t.payload.H,a=e.get("loaded")-1;void 0!==n&&(a=n-1);var i=e.get("table").get(a);return e.set("toolLengthOffset",i)}),Object(F.a)(ni,te.machineState.tool.clearToolLengthOffset,function(e,t){return e.set("toolLengthOffset",zi)}),Object(F.a)(ni,te.machineState.tool.table.setTool,function(e,t){var n=t.payload,a=n.P,i={X:n.X,Y:n.Y,Z:n.Z,A:n.A,B:n.B,C:n.C,U:n.U,V:n.V,W:n.W,R:n.R,I:n.I,J:n.J,Q:n.Q,holder:n.holder};for(var r in i)void 0===i[r]&&delete i[r];var o=e.get("table");return e.set("table",o.set(a-1,o.get(a-1).merge(i)))}),ni),z.a.Map({set:0,loaded:0,toolLengthOffset:zi,table:z.a.List([z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe}),z.a.Map({Z:-3,R:.0625,holder:Xe})])})),Xi=Object(X.c)((ai={},Object(F.a)(ai,$.machineState.kinematicsMode.setFiveAxis,function(){return D}),Object(F.a)(ai,$.machineState.kinematicsMode.setTrivial,function(){return Z}),ai),Z),Hi=Object(X.c)(Object(F.a)({},K.machineState.cutterCompensation.off,void 0),Ri),Vi=Object(X.c)(Object(F.a)({},ee.machineState.spindleSpeed.set,function(e,t){return t.payload}),0),Yi=Object(X.c)((ii={},Object(F.a)(ii,Q.machineState.spindleControl.off,function(){return N}),Object(F.a)(ii,Q.machineState.spindleControl.ccw,function(){return _}),Object(F.a)(ii,Q.machineState.spindleControl.cw,function(){return"CW"}),ii),N),Wi=Object(X.b)({MACHINE_STATE:{MACHINE:{SET:void 0}}}),$i=Object(X.c)(Object(F.a)({},Wi.machineState.machine.set,function(e,t){return t.payload}),"V2"),Ki=z.a.Map({mode:pi,distanceMode:ji,arcDistanceMode:Ci,turns:0,issuedMotionCommand:!1,position:z.a.Map({X:2.5,Y:2.5,Z:0,A:0,B:0,C:0,I:0,J:0,K:0})}),qi=function(e,t){var n=e.get("position"),a=t.payload,i=a.X,r=a.Y,o=a.Z,s=a.A,c=a.B,l=a.C,u=a.I,d=a.J,h=a.K,m=a.units,p=a.G53,f=e.get("distanceMode"),g=e.get("arcDistanceMode"),v={X:i,Y:r,Z:o,A:s,B:c,C:l};for(var b in v)void 0===v[b]?delete v[b]:m!==Pi||"X"!==b&&"Y"!==b&&"Z"!==b||(v[b]=v[b]/25.4);var M={I:u,J:d,K:h};for(var S in M)void 0===M[S]?M[S]=0:m===Pi&&(M[S]=M[S]/25.4);var O=e.get("position");if(p||(O=f===ji?e.get("position").merge(v):O.withMutations(function(e){for(var t in v)e.set(t,e.get(t)+v[t])})),g===Ti)O=e.get("position").merge(M);else{var w={I:"X",J:"Y",K:"Z"};O=O.withMutations(function(e){for(var t in M)e.set(t,n.get(w[t])+M[t])})}return O},Ji=Object(X.c)((ri={},Object(F.a)(ri,ne.machineState.distanceMode.setAbsolute,function(e,t){return e.set("distanceMode",ji)}),Object(F.a)(ri,ne.machineState.distanceMode.setIncremental,function(e,t){return e.set("distanceMode",xi)}),Object(F.a)(ri,ne.machineState.motion.nonMotionCommand,function(e,t){return e.set("issuedMotionCommand",!1)}),Object(F.a)(ri,ne.machineState.motion.off,function(e,t){return e.set("mode",pi)}),Object(F.a)(ri,ne.machineState.motion.rapid,function(e,t){return e.withMutations(function(e){return e.set("position",qi(e,t)).set("issuedMotionCommand",!0).set("mode",fi)})}),Object(F.a)(ri,ne.machineState.motion.linear,function(e,t){return e.withMutations(function(e){return e.set("position",qi(e,t)).set("issuedMotionCommand",!0).set("mode",gi)})}),Object(F.a)(ri,ne.machineState.motion.arcCW,function(e,t){var n=t.payload.P;return e.withMutations(function(e){return e.set("position",qi(e,t)).set("turns",n).set("issuedMotionCommand",!0).set("mode",vi)})}),Object(F.a)(ri,ne.machineState.motion.arcCCW,function(e,t){var n=t.payload.P;return e.withMutations(function(e){return e.set("position",qi(e,t)).set("turns",n).set("issuedMotionCommand",!0).set("mode",bi)})}),Object(F.a)(ri,ne.machineState.motion.setPosition,function(e,t){return e.withMutations(function(e){return e.set("position",qi(e,t)).set("issuedMotionCommand",!0)})}),ri),Ki),Qi=Ji,er=n(201),tr={G4:0,G10:0,G28:0,G30:0,G53:0,G92:0,"G92.1":0,"G92.2":0,"G92.3":0,G0:1,G1:1,G2:1,G3:1,G33:1,"G38.2":1,G73:1,G76:1,G81:1,G82:1,G83:1,G84:1,G85:1,G86:1,G87:1,G88:1,G89:1,G17:2,G18:2,G19:2,"G17.1":2,"G18.1":2,"G19.1":2,G90:3,G91:3,"G90.1":4,"G91.1":4,G93:5,G94:5,G95:5,G20:6,G21:6,G40:7,G41:7,G42:7,"G41.1":7,"G42.1":7,G43:8,"G43.1":8,G49:8,G98:10,G99:10,G54:12,G55:12,G56:12,G57:12,G58:12,G59:12,"G59.1":12,"G59.2":12,"G59.3":12,G61:13,"G61.1":13,G664:13,G96:14,G97:14,G7:15,G8:15,M0:4,M1:4,M2:4,M30:4,M60:4,M3:7,M4:7,M5:7,M7:8,M8:8,M9:8,M48:9,M49:9},nr={G10:!0,G92:!0,G0:!0,G1:!0,G2:!0,G3:!0,G33:!0,"G38.2":!0,G73:!0,G76:!0,G81:!0,G82:!0,G83:!0,G84:!0,G85:!0,G86:!0,G87:!0,G88:!0,G89:!0,"G43.1":!0},ar=n(331),ir=function e(t){var n=this;Object(v.a)(this,e),this.getState=function(){return n.store.getState()},this.interpret=function(e){n.messages=[];var t,a={},i=[],r=Object(ar.parseLine)(e);for(var o in r.words.forEach(function(e,t){var n=Object(er.a)(e,2),r=n[0]+n[1],o=function(e){return tr[e]}(r);void 0!==o&&(a[o]?a[o].push(r):a[o]=[r]),function(e){return nr[e]}(r)&&i.push(r)}),i.length>1&&n.messages.push({message:"Can't run multiple commands with positional arguments on the same line. Codes "+(t=i).slice(0,t.length-1).join(", ")+" and "+t[t.length-1]+" use positional arguments.",codes:t,type:Me,severity:de}),a)a[o].length>1&&n.messages.push(Ee(a[o],o));var s={},c=[],l=[],u=[],d=!1;r.words.forEach(function(e,t){var a=function(e){return se[e]}(e[0]);a&&c.push([a,e[1]]);var i=e[0]+e[1];"G43"===i&&(d=!0);var r=function(e){return ae[e]}(i),o=function(e){return oe[e]}(i);o&&l.push(o());var h=function(e){return re[e]}(i);h&&u.push(h(s));var m=function(e){return ce[e]}(i);m&&(s[i]=!0),r&&n.messages.push(function(e){var t=le(e);return{message:"Ignoring "+e+" as it is currently unimplemented in the simulator. Intended usage: "+t,description:t,severity:he,type:pe,code:e}}(i)),o||r||m||h||a||(s[e[0]]=e[1],"G"!==e[0]&&"M"!==e[0]||n.messages.push(function(e){return{message:"Unrecognized G or M code: "+e,severity:de,type:fe,code:e}}(i)))});var h=a[1];0===i.length&&["X","Y","Z","A","B","C","I","J","K"].reduce(function(e,t){return e||void 0!==s[t]},!1)&&(u.push(ue(s)),h=!0),h||u.push(q.machineState.motion.nonMotionCommand()),l.forEach(function(e){n.store.dispatch(e)});var m=n.store.getState().get("units");if(s.units=m,c.forEach(function(e){var t=Object(er.a)(e,2),a=t[0],i=t[1];n.store.dispatch(a(i))}),u.forEach(function(e){n.store.dispatch(e)}),h){var p=n.store.getState(),f=Ie[p.get("machine")];n.messages=n.messages.concat(f.getLimitErrors(p.get("joints")))}var g,v,b=n.store.getState();if(d){var M=b.get("tool"),S=M.get("loaded"),O=S;"undefined"!==typeof s.H&&(O=s.H),n.messages.push(function(e,t,n,a){return{message:"Set tool length offset to "+t.toFixed(4)+" which is what is stored under tool "+e+".",toolNumber:e,toolLengthOffset:t,toolDiameter:n,toolHolder:a,severity:me,type:Oe}}(O,M.get("toolLengthOffset").get("Z"),2*M.get("toolLengthOffset").get("R"),M.get("toolLengthOffset").get("holder"))),S!==O&&n.messages.push({message:"Tool specified by G43, T"+(g=O)+", differs from last tool loaded with M6, T"+(v=S)+". The simulator uses the last tool loaded with M6 to determine which tool to show, so your tool path may vary from what you would expect.",g43ToolNum:g,m6ToolNum:v,severity:he,type:we})}return b};var a=t.machineState;this.store=Object(ui.createStore)(or,a)},rr=Object(hi.combineReducers)({machine:$i,feedRateMode:Fi,feedRate:Di,units:Bi,tool:Ui,planeSelect:Zi,kinematicsMode:Xi,cutterCompensation:Hi,spindleSpeed:Vi,spindleControl:Yi,motion:Qi,joints:function(e,t){return e||z.a.List([2.5,2.5,0,0,0])}}),or=Object(mi.a)(rr,function(e,t){return e.set("joints",(n=e,Object(X.c)(Object(F.a)({},Object(X.a)(ne.machineState.motion.rapid,ne.machineState.motion.linear,ne.machineState.motion.arcCW,ne.machineState.motion.arcCCW,ne.machineState.motion.setPosition),function(e,t){var a,i=t.payload,r=i.X,o=i.Y,s=i.Z,c=i.A,l=i.B,u=i.C,d=i.units,h=i.G53,m=Ie[n.get("machine")];if(h){var p=m.kinematics.forwardKinematics(n,h),f={X:r,Y:o,Z:s,A:c,B:l,C:u};for(var g in f)void 0===f[g]?delete f[g]:d!==Pi||"X"!==g&&"Y"!==g&&"Z"!==g||(f[g]=f[g]/25.4);p=n.get("motion").get("distanceMode")===ji?p.merge(f):p.withMutations(function(e){for(var t in f)e.set(t,e.get(t)+f[t])}),a=m.kinematics.inverseKinematics(n.set("motion",n.get("motion").set("position",p)),h)}else a=m.kinematics.inverseKinematics(n);return a}),z.a.List([0,0,0,0,0])))(e.get("joints"),t));var n},function(e,t){return e.set("motion",(n=e,Object(X.c)(Object(F.a)({},Object(X.a)(ne.machineState.tool.setToolLengthOffset,ne.machineState.tool.clearToolLengthOffset,ne.machineState.motion.rapid,ne.machineState.motion.linear,ne.machineState.motion.arcCW,ne.machineState.motion.arcCCW,ne.machineState.motion.setPosition,ne.machineState.kinematicsMode.setFiveAxis,ne.machineState.kinematicsMode.setTrivial),function(e,t){var a=Ie[n.get("machine")],i=e.get("position").merge(a.kinematics.forwardKinematics(n));return e.set("position",i)}),Ki))(e.get("motion"),t));var n}),sr=function(e,t){var n=e.get("times"),a=0;if(t>=n.get(n.size-1))a=n.size-1,t=n.get(a);else if(0===t)a=0;else{for(var i=0,r=n.size-1,o=Math.floor(n.size/2);i+1<r;)n.get(o)>=t?r=o:i=o,o=Math.floor(.5*(i+r));a=t<n.get(i)?i:r}return e.withMutations(function(e){return e.set("currentLine",a).set("currentTime",t)})},cr=z.a.Map({fileName:"sim.ngc",lines:[],messages:z.a.List([]),states:z.a.List([]),initialState:z.a.Map({}),times:z.a.List([]),linesPerIndex:1,loading:!1,loadingProgress:0,processing:!1,processingProgress:0,currentLine:0,totalTime:0,currentTime:0,paused:!0,running:!1,timeMultiplier:1}),lr=Object(X.c)((oi={},Object(F.a)(oi,$e.interpreter.startLoading,function(e,t){return e.withMutations(function(e){return e.set("lines",[]).set("loadingProgress",0).set("loading",!0).set("currentLine",0).set("currentTime",0).set("totalTime",0).set("states",z.a.List([])).set("times",z.a.List([])).set("messages",z.a.List([]))})}),Object(F.a)(oi,$e.interpreter.endLoading,function(e,t){return e.set("loading",!1)}),Object(F.a)(oi,$e.interpreter.setFileName,function(e,t){return e.set("fileName",t.payload)}),Object(F.a)(oi,$e.interpreter.setLoadingProgress,function(e,t){return e.set("loadingProgress",t.payload)}),Object(F.a)(oi,$e.interpreter.setLines,function(e,t){return e.withMutations(function(e){return e.set("lines",t.payload.lines).set("currentLine",0).set("currentTime",0).set("paused",!0).set("running",!0).set("linesPerIndex",Math.max(Math.min(Math.ceil(t.payload.lines.length/5e4),300),1)).set("states",z.a.List([])).set("times",z.a.List([])).set("messages",z.a.List([]))})}),Object(F.a)(oi,$e.interpreter.startProcessing,function(e,t){return e.withMutations(function(e){return e.set("processingProgress",0).set("processing",!0).set("states",z.a.List([])).set("times",z.a.List([])).set("messages",z.a.List([]))})}),Object(F.a)(oi,$e.interpreter.endProcessing,function(e,t){return e.set("processing",!1)}),Object(F.a)(oi,$e.interpreter.setProcessingProgress,function(e,t){return e.set("processingProgress",t.payload)}),Object(F.a)(oi,$e.interpreter.setInitialState,function(e,t){return e.set("initialState",t.payload)}),Object(F.a)(oi,$e.interpreter.appendIndices,function(e,t){var n;return e.set("states",(n=e.get("states")).push.apply(n,Object(Ht.a)(t.payload)))}),Object(F.a)(oi,$e.interpreter.appendMessages,function(e,t){var n;return e.set("messages",(n=e.get("messages")).push.apply(n,Object(Ht.a)(t.payload)))}),Object(F.a)(oi,$e.interpreter.appendTimes,function(e,t){var n,a=(n=e.get("times")).push.apply(n,Object(Ht.a)(t.payload)),i=e.get("lines");return e.withMutations(function(e){return e.set("times",a).set("totalTime",a.get(a.size-1)*i.length/a.size)})}),Object(F.a)(oi,$e.interpreter.pause,function(e,t){return e.set("paused",!0)}),Object(F.a)(oi,$e.interpreter.stop,function(e,t){return e.set("running",!1)}),Object(F.a)(oi,$e.interpreter.unpause,function(e,t){return e.get("currentTime")>=e.get("totalTime")-Ii&&(e=e.set("currentTime",0).set("currentLine",0)),e.set("paused",!1)}),Object(F.a)(oi,$e.interpreter.run,function(e,t){return e.set("running",!0)}),Object(F.a)(oi,$e.interpreter.setTimeMultiplier,function(e,t){return e.set("timeMultiplier",t.payload)}),Object(F.a)(oi,$e.interpreter.previousLine,function(e,t){var n=Math.max(e.get("currentLine")-1,0),a=e.get("times").get(n);return e.set("currentLine",n).set("currentTime",a).set("paused",!0)}),Object(F.a)(oi,$e.interpreter.nextLine,function(e,t){var n=Math.min(e.get("currentLine")+1,e.get("lines").length-1),a=e.get("times").get(n);return e.set("currentLine",n).set("currentTime",a)}),Object(F.a)(oi,$e.interpreter.setCurrentLine,function(e,t){var n=Math.max(0,Math.min(e.get("lines").length-1,t.payload)),a=e.get("times").get(n);return e.set("currentLine",n).set("currentTime",a)}),Object(F.a)(oi,$e.interpreter.incrementTime,function(e,t){var n=e.get("currentTime"),a=e.get("timeMultiplier"),i=t.payload*a;return(e=sr(e,n+i)).get("currentTime")>=e.get("totalTime")?e.set("paused",!0):e}),Object(F.a)(oi,$e.interpreter.setCurrentLineWithTime,function(e,t){return sr(e,t.payload)}),Object(F.a)(oi,$e.interpreter.setCurrentLineWithPercentage,function(e,t){return sr(e,e.get("totalTime")*t.payload/100).set("paused",!0)}),oi),cr),ur=Object(X.c)((si={},Object(F.a)(si,et.viewer3D.parentCamera,function(e,t){return e.set("cameraParent",t.payload)}),Object(F.a)(si,et.viewer3D.setPerspective,function(e,t){return e.set("cameraMode","PERSPECTIVE")}),Object(F.a)(si,et.viewer3D.setOrthographic,function(e,t){return e.set("cameraMode","ORTHOGRAPHIC")}),Object(F.a)(si,et.viewer3D.loadModel,function(e,t){return e.set("modelLoaded",!0)}),Object(F.a)(si,et.viewer3D.showModel,function(e,t){return e.set("showModel",!0)}),Object(F.a)(si,et.viewer3D.hideModel,function(e,t){return e.set("showModel",!1)}),Object(F.a)(si,et.viewer3D.showDentalFixture,function(e,t){return e.set("showDentalFixture",!0)}),Object(F.a)(si,et.viewer3D.hideDentalFixture,function(e,t){return e.set("showDentalFixture",!1)}),si),z.a.Map({cameraParent:Rt,showModel:!1,showDentalFixture:!1,cameraMode:"PERSPECTIVE",modelLoaded:!1})),dr=Object(X.c)((ci={},Object(F.a)(ci,Je.ui.gcodePane.setWidth,function(e,t){return e.set("width",t.payload)}),Object(F.a)(ci,Je.ui.gcodePane.setSelected,function(e,t){return e.set("selectedLine",t.payload)}),Object(F.a)(ci,Je.ui.gcodePane.setLineOffset,function(e,t){return e.set("lineOffset",t.payload)}),Object(F.a)(ci,Je.ui.gcodePane.setShowLines,function(e,t){return e.set("showLines",t.payload)}),Object(F.a)(ci,Je.ui.gcodePane.scroll,function(e,t){return e.set("lineOffset",e.get("lineOffset")+t.payload)}),Object(F.a)(ci,Je.ui.gcodePane.setTab,function(e,t){return e.set("currentTab",t.payload)}),Object(F.a)(ci,Je.ui.gcodePane.togglePane,function(e,t){return e.set("visible",!e.get("visible"))}),ci),z.a.Map({width:320,visible:!0,lineOffset:0,showLines:50,selectedLine:0,currentTab:0})),hr=Object(X.c)(Object(F.a)({},Je.ui.controlsOverlay.setVisible,function(e,t){return e.set("visible",t.payload)}),z.a.Map({visible:!1})),mr=Object(X.c)(Object(F.a)({},tt.iframe.initialize,function(e,t){return e.set("visible",!1)}),z.a.Map({visible:!0})),pr=Object(hi.combineReducers)({gcodePane:dr,controlsOverlay:hr,titleBar:mr}),fr=Object(hi.combineReducers)({machineState:or,interpreter:lr,ui:pr,viewer3D:ur}),gr=Object(mi.a)(fr,function(e,t){return e.set("machineState",(n=e,Object(X.c)(Object(F.a)({},Object(X.a)(tt.interpreter.previousLine,tt.interpreter.nextLine,tt.interpreter.incrementTime,tt.interpreter.setCurrentLineWithPercentage,tt.interpreter.setCurrentLineWithTime,tt.interpreter.setCurrentLine),function(e,t){var a=n.get("interpreter").get("currentLine"),i=a-1,r=n.get("interpreter").get("linesPerIndex"),o=n.get("interpreter").get("states").size;if(o>0){var s=Math.min(Math.floor(i/r),o-1),c=s<0?n.get("interpreter").get("initialState"):n.get("interpreter").get("states").get(s),l=Math.max(s*r,-1),u=c,d=n.get("interpreter").get("lines"),h=null,m=null,p=Math.min(Math.floor(a/r),o-1);if(i>l||p*r!==a){h=new ir({machineState:u});for(var f=l;f<=i;)u=h.interpret(d[f]),f++}m=p*r===a?n.get("interpreter").get("states").get(p):h.interpret(d[a]);var g=Ie[m.get("machine")],v=u.get("joints"),b=g.kinematics.forwardKinematics(m.set("joints",v)),M=m.get("motion").get("position"),S=n.get("interpreter").get("times"),O=i<0?0:S.get(i),w=S.get(a),E=n.get("interpreter").get("currentTime"),y=1;w-O>0&&(y=(E-O)/(w-O));var j=m.get("motion").get("mode"),x=m.get("motion").get("turns"),T=m.get("planeSelect"),C=_i(j,b,M,y,T,x),L=m.set("motion",m.get("motion").set("position",C)),G=g.kinematics.inverseKinematics(L);return L.set("joints",G)}return e}),n.get("machineState")))(e.get("machineState"),t));var n}),vr=n(36),br=n.n(vr),Mr=n(24),Sr=br.a.mark(xr),Or=br.a.mark(Tr),wr=C(),Er=60,yr=3;function jr(e,t,n,a,i,r){return new Promise(function(o){return setTimeout(function(){for(var s,c=[],l=[],u=[],d=[],h=e.getState(),m=0;m<a&&n<t.length;m++){s=e.interpret(t[n]),e.messages.length>0&&e.messages.forEach(function(e){return function(t){d.push(xe(t,e))}}(n));var p=Ie[s.get("machine")],f=h.get("joints"),g=s.get("joints"),v=h.get("motion").get("position"),b=s.get("motion").get("position");if(s.get("motion").get("issuedMotionCommand")){var M=s.get("motion").get("turns"),S=s.get("motion").get("mode"),O=s.get("planeSelect"),w=s.get("units"),E=0,y=s.get("feedRate"),j=s.get("feedRateMode");if(j!==Li&&w===Pi&&(y/=25.4),S!==fi)if(j===Li)y<Ii?d.push(xe(je(),n)):E=1/y*Er;else if(j===Gi)if(S===gi)if(y<Ii)d.push(xe(je(),n));else{for(var x=0,T=0;T<yr;T++){var C=Math.abs(g.get(T)-f.get(T));x=Math.max(x,C),E=Math.max(E,C/y*Er)}if(x>-Ii&&x<Ii)for(var L=3;L<f.size;L++){var G=Math.abs(g.get(L)-f.get(L));E=Math.max(E,G/y*Er)}}else if(S===vi||S===bi){if(y<Ii)d.push(xe(je(),n));else E=Ni(v,b,O,S,M)/y*Er}else E=0;else E=3;for(var k=p.limits.velocities,A=0;A<f.size;A++){var P=Math.abs(g.get(A)-f.get(A))/k[A];E=Math.max(E,P)}r+=E;var R=f,I=g,N=s,_=p.kinematics.forwardKinematics(N.set("joints",R)),F=N.get("motion").get("position"),Z=N.get("kinematicsMode"),B=Math.abs(I.get(3)-R.get(3)),z=Math.abs(I.get(4)-R.get(4));if((B>Ii||z>Ii)&&Z!==D||S!==fi&&S!==gi){var U=40,X=!0,H=[];if(S!==fi&&S!==gi||!(z>-Ii||B>-Ii)){if(S===vi||S===bi){var V=Ni(v,b,O,S,M);U=Math.max(Math.ceil(V/.1),5)}}else{var Y=Math.max(I.get(0),R.get(0)),W=Math.max(I.get(1),R.get(1)),$=Math.max(6-I.get(2),6-R.get(2)),K=Math.sqrt(Y*Y+$*$),q=Math.sqrt(W*W+$*$),J=B*Math.PI/180*q,Q=z*Math.PI/180*K;U=Math.max(Math.ceil(Q/.1),Math.ceil(J/.1),5)}for(;X;){for(var ee=0,te=void 0,ne=0;ne<U;ne++){var ae=ne/(U-1),ie=r-E+ae*E,re=void 0;re=0===ae?.01/E:-.01/E;var oe=s.get("motion").get("turns"),se=_i(S,_,F,ae,O,oe),ce=_i(S,_,F,ae+re,O,oe),le=p.kinematics.inverseKinematics(N.set("motion",N.get("motion").set("position",se))),ue=p.kinematics.inverseKinematics(N.set("motion",N.get("motion").set("position",ce))),de=p.workPieceSpace(le,Ma(N).get("Z")),he=p.toolOrientation(le),me=p.workPieceSpace(ue,Ma(N).get("Z")),pe=[de.get("X"),de.get("Y"),de.get("Z")],fe=[me.get("X"),me.get("Y"),me.get("Z")],ge=[he.get("X"),he.get("Y"),he.get("Z")],ve=void 0;if(re>0){var be=fe[0]-pe[0],Me=fe[1]-pe[1],Se=fe[2]-pe[2];ve=Math.sqrt(be*be+Me*Me+Se*Se)/.01}else{var Oe=pe[0]-fe[0],we=pe[1]-fe[1],Ee=pe[2]-fe[2];ve=Math.sqrt(Oe*Oe+we*we+Ee*Ee)/.01}if(S===fi?H.push({position:pe,color:_e,speed:ve,time:ie,line:n,normal:ge}):H.push({position:pe,color:Fe,speed:ve,time:ie,line:n,normal:ge}),ne>0){var ye=pe[0]-te[0],Te=pe[1]-te[1],Ce=pe[2]-te[2],Le=Math.sqrt(ye*ye+Te*Te+Ce*Ce);ee=Math.max(ee,Le)}te=pe}ee>1.5*.1?(U=Math.ceil(U*ee/.1),H=[]):X=!1}for(var Ge=0;Ge<H.length;Ge++)u.push(H[Ge])}else{var ke=Ma(h).get("Z"),Ae=Ma(s).get("Z"),Pe=p.workPieceSpace(f,ke),Re=p.workPieceSpace(g,Ae),Ne=p.toolOrientation(f),De=p.toolOrientation(g),Ze=Ne.get("X"),Be=Ne.get("Y"),ze=Ne.get("Z"),Ue=De.get("X"),Xe=De.get("Y"),He=De.get("Z"),Ve=Pe.get("X"),Ye=Pe.get("Y"),We=Pe.get("Z"),$e=Re.get("X"),Ke=Re.get("Y"),qe=Re.get("Z"),Je=$e-Ve,Qe=Ke-Ye,et=qe-We,tt=Math.sqrt(Je*Je+Qe*Qe+et*et)/E;switch(S){case fi:u.push({position:[Ve,Ye,We],color:_e,speed:tt,time:r-E,line:n,normal:[Ze,Be,ze]}),u.push({position:[$e,Ke,qe],color:_e,speed:tt,time:r,line:n,normal:[Ue,Xe,He]});break;case gi:u.push({position:[Ve,Ye,We],color:Fe,speed:tt,time:r-E,line:n,normal:[Ze,Be,ze]}),u.push({position:[$e,Ke,qe],color:Fe,speed:tt,time:r,line:n,normal:[Ue,Xe,He]});break;default:console.error("shouldn't get here")}}}l.push(r),n%i===0&&c.push(s),h=s,n++}o({line:n,states:c,times:l,points:u,messages:d})})})}function xr(e){var t,n,a,i,r,o,s,c,l,u,d,h,m,p,f,g,v,b,M,S,O,w,y;return br.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return t=E()(),j.next=3,Object(Mr.c)(tt.interpreter.startProcessing());case 3:return j.next=5,Object(Mr.d)(fa);case 5:return n=j.sent,j.next=8,Object(Mr.d)(ga);case 8:return a=j.sent,j.next=11,Object(Mr.d)(va);case 11:return i=j.sent,r=new ir({machineState:n}),j.next=15,Object(Mr.c)(tt.interpreter.setInitialState(n));case 15:o=Ze.getInstance(),s=10,c=12,l=240,u=10,d=200,o.clear(),h=0,m=0,p=[],f=[],g=[];case 27:if(!(m<a.length)){j.next=54;break}return S=E()(),j.next=31,Object(Mr.b)(jr,r,a,m,s,i,h);case 31:if(O=j.sent,w=E()(),s=document.hasFocus()?Math.max(Math.floor(s*c/(w-S)),u):Math.max(Math.floor(s*l/(w-S)),u),(v=f).push.apply(v,Object(Ht.a)(O.times)),(b=g).push.apply(b,Object(Ht.a)(O.states)),(M=p).push.apply(M,Object(Ht.a)(O.messages)),h=O.times[O.times.length-1],m=O.line,o.addPoints(O.points),!(f.length>=d||m>=a.length)){j.next=52;break}return j.next=43,Object(Mr.c)(tt.interpreter.appendIndices(g));case 43:return j.next=45,Object(Mr.c)(tt.interpreter.appendTimes(f));case 45:return j.next=47,Object(Mr.c)(tt.interpreter.appendMessages(p));case 47:return j.next=49,Object(Mr.c)(tt.interpreter.setProcessingProgress(m/a.length*100));case 49:g=[],f=[],p=[];case 52:j.next=27;break;case 54:return j.next=56,Object(Mr.c)(tt.interpreter.endProcessing());case 56:if(e.preview){j.next=67;break}return wr.timing("interpreter","parsed gcode",Math.round(E()()-t)),j.next=60,Object(Mr.d)(ba);case 60:return y=j.sent,wr.event("interpreter","calculated approximate run time","calculated approximate run time",Math.round(1e3*y)),j.next=64,Object(Mr.d)(la);case 64:j.sent.forEach(function(e){wr.event("interpreter","unimplemented code "+e.code)}),wr.send();case 67:case"end":return j.stop()}},Sr,this)}function Tr(){return br.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Mr.f)(tt.interpreter.setLines,xr);case 2:case"end":return e.stop()}},Or,this)}var Cr=br.a.mark(kr),Lr=br.a.mark(Ar);function Gr(){return new Promise(function(e){return window.requestAnimationFrame(function(){e()})})}function kr(e){var t,n,a,i,r,o;return br.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=.016;case 1:return e.next=4,Object(Mr.d)(pa);case 4:if(n=e.sent,a=n.get("running"),i=n.get("paused"),!a||i){e.next=17;break}return r=performance.now(),e.next=11,Object(Mr.b)(Gr);case 11:return e.next=13,Object(Mr.c)(tt.interpreter.incrementTime(t));case 13:o=performance.now(),t=(o-r)/1e3,e.next=18;break;case 17:return e.abrupt("break",20);case 18:e.next=1;break;case 20:case"end":return e.stop()}},Cr,this)}function Ar(){return br.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Mr.f)([tt.interpreter.setLines,tt.interpreter.pause,tt.interpreter.unpause,tt.interpreter.run,tt.interpreter.end,tt.interpreter.nextLine,tt.interpreter.previousLine,tt.interpreter.setCurrentLineWithPercentage],kr);case 2:case"end":return e.stop()}},Lr,this)}var Pr=br.a.mark(Ir),Rr="%\nG20\nG90 G94 G40 G17\nG53 G0 Z0\nG0 A0 B0\nG0 X0\nM5\nM0\nT4 M6\nG43\nS8500 M3\nF20\n\nG0 A90\nG0 X1 Y1\nG1 Z0\nG1 X-1\nG1 y-1\nG1 X1\nG1 Y1\n\nG49\nG53 G0 Z0\n\nM5\nM30\n%\n";function Ir(){return br.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Mr.c)(tt.interpreter.setLines(Rr.split("\n")));case 2:case"end":return e.stop()}},Pr,this)}var Nr=br.a.mark(Fr),_r=br.a.mark(Dr);function Fr(e){var t;return br.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),t=li.getInstance(),console.log(t.windows),t.sendMessage(e),void(n.next=6);case 6:case"end":return n.stop()}},Nr,this)}function Dr(){return br.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Mr.e)(tt.iframe.toRockhopper,Fr);case 2:case"end":return e.stop()}},_r,this)}var Zr=br.a.mark(Br);function Br(){return br.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Mr.a)([Tr(),Ar(),Ir(),Dr()]);case 2:case"end":return e.stop()}},Zr,this)}var zr=n(332),Ur=Object(di.a)(),Xr=Object(ui.createStore)(gr,z.a.Map(),Object(zr.composeWithDevTools)(Object(ui.applyMiddleware)(Ur)));Ur.run(Br),C().pageview("/",document.location.href,document.title).send(),console.log("Pocket NC Simulator v0.2.0"),console.log("Commit","be7ba9ada4919a93cac81cb13fd336ca9145598f"),window.addEventListener("message",function(e){if(e.origin!==document.location.origin){var t=tt.iframe.initialize().type,n=tt.iframe.rockhopper({}).type,a=tt.iframe.embedGcode().type,i=li.getInstance();switch(e.data.type){case t:Xr.dispatch(tt.iframe.initialize(e.data.payload)),i.addWindow(e.source,e.origin);break;case n:if("file_content"===e.data.payload.id){var r=e.data.payload.data.split("\n").map(function(e){return e.replace("\r","")});Xr.dispatch(tt.interpreter.setLines(r))}else if(e.data.payload.id.startsWith("tool_table")){var o=e.data.payload.id.split(":")[1],s=e.data.payload.data[3],c=e.data.payload.data[10];Xr.dispatch(tt.machineState.tool.table.setTool({P:o,Z:s,R:c}))}break;case a:var l=e.data.payload.split("\n").map(function(e){return e.trim()});Xr.dispatch(tt.interpreter.setLines(l))}}}),window.focus(),f.a.render(m.a.createElement(g.a,{store:Xr},m.a.createElement(Ka,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");qa?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ja(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ja(e)})}}()}},[[335,2,1]]]);
//# sourceMappingURL=main.223b6223.chunk.js.map